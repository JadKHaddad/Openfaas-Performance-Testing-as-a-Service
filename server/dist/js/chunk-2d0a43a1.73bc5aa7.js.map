{"version":3,"sources":["webpack:///./src/views/Control.vue","webpack:///./src/components/InstallationProcess.vue","webpack:///./src/components/InstallationProcess.vue?0085","webpack:///./src/views/Control.vue?5e4f"],"names":["class","type","id","killRunningTasks","deleteAllProjects","projects","project","key","url","openfaasUrl","socket","mobileAgent","deleteProject","reversedTests","test","info","JSON","parse","data","status","valid","showPath","pid","project_name","sid","script_name","startMinimized","minimizeTests","restart","deleteTest","data-mdb-toggle","title","stop","name","props","socketIntv","methods","fetch","this","method","body","stringify","command","then","json","success","$root","showInfo","$emit","catch","beforeUnmount","clearInterval","mounted","setInterval","emit","openfaasurl","on","msg","status_code","console","log","error","__exports__","components","Test","InstallationProcess","tests","register","off","IsJsonString","Object","keys","length","init","i","setUpConfirmation","start","users","spawn_rate","workers","host","time","spawnRate","parseInt","startedAt","started_at","ids","filter","p","computed","entries","reverse","updated","update","render"],"mappings":"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","file":"js/chunk-2d0a43a1.73bc5aa7.js","sourcesContent":["<template>\n  <div>\n    <div class=\"control-btn-container\">\n      <button\n        type=\"button\"\n        class=\"btn btn-danger btn-block control-btn\"\n        id=\"kill-btn\"\n        @click=\"killRunningTasks\"\n      >\n        Kill running tasks\n      </button>\n      <button\n        type=\"button\"\n        class=\"btn btn-danger btn-block control-btn\"\n        id=\"cleanup-btn\"\n        @click=\"deleteAllProjects\"\n      >\n        Delete all projects\n      </button>\n    </div>\n    <InstallationProcess\n      v-for=\"project in projects\"\n      :key=\"project\"\n      :id=\"project\"\n      :url=\"url\"\n      :openfaasUrl=\"openfaasUrl\"\n      :socket=\"socket\"\n      :mobileAgent=\"mobileAgent\"\n      @delete=\"deleteProject(project)\"\n    >\n    </InstallationProcess>\n\n    <Test\n      v-for=\"test in reversedTests\"\n      :key=\"test[0]\"\n      :id=\"test[0]\"\n      :info=\"JSON.parse(test[1].info)\"\n      :data=\"JSON.parse(test[1].data)\"\n      :status=\"test[1].status\"\n      :valid=\"test[1].valid\"\n      :showPath=\"true\"\n      :url=\"url\"\n      :openfaasUrl=\"openfaasUrl\"\n      :pid=\"test[1].project_name\"\n      :sid=\"test[1].script_name\"\n      :startMinimized=\"minimizeTests\"\n      :mobileAgent=\"mobileAgent\"\n      @restart=\"restart\"\n      @delete=\"deleteTest\"\n    ></Test>\n  </div>\n</template>\n\n<script>\nimport Test from \"@/components/Test.vue\";\nimport InstallationProcess from \"@/components/InstallationProcess.vue\";\n\nexport default {\n  name: \"Control\",\n  components: {\n    Test,\n    InstallationProcess,\n  },\n  props: [\"url\", \"openfaasUrl\", \"socket\", \"minimizeTests\", \"update\", \"mobileAgent\"],\n  data() {\n    return {\n      tests: {},\n      projects: [],\n    };\n  },\n  methods: {\n    register() {\n      this.socket.off(this.openfaasUrl + \"_control\");\n      this.socket.emit(\"register_control\", { openfaasurl: this.openfaasUrl });\n      this.socket.on(this.openfaasUrl + \"_control\", (msg) => {\n        if (IsJsonString(msg)) {\n          msg = JSON.parse(msg);\n          if (msg.success) {\n            if (\n              Object.keys(msg.tests).length >= Object.keys(this.tests).length\n            ) {\n              for (var key in msg.tests) {\n                //console.log(msg.tests[key]);\n                const id = msg.tests[key].id;\n                if (id in this.tests) {\n                  this.tests[id].data = msg.tests[key].data;\n                  this.tests[id].valid = msg.tests[key].valid;\n                } else {\n                  this.tests[id] = msg.tests[key];\n                }\n              }\n            } else {\n              for (var key in this.tests) {\n                if (key in msg.tests) {\n                  //console.log(msg.tests[key]);\n                  const id = msg.tests[key].id;\n                  if (id in this.tests) {\n                    this.tests[id].data = msg.tests[key].data;\n                    this.tests[id].valid = msg.tests[key].valid;\n                  } else {\n                    this.tests[id] = msg.tests[key];\n                  }\n                } else {\n                  this.tests[key].status = 0;\n                }\n              }\n            }\n          }\n        }\n      });\n      // console.log(\"control registered\")\n    },\n    init() {\n      //get running tests\n      fetch(this.url, { method: \"POST\", body: JSON.stringify({ command: 13 }) })\n        .then((data) => data.json())\n        .then((data) => {\n          if (data.success) {\n            this.tests = data.tests;\n          }\n        })\n        .catch(() => {\n          this.$emit(\"info\", \"Could not connect to server\", \"red\");\n        });\n      //get installing projects\n      fetch(this.url, { method: \"POST\", body: JSON.stringify({ command: 1 }) })\n        .then((data) => data.json())\n        .then((data) => {\n          if (data.success) {\n            this.projects = data.projects;\n          }\n        })\n        .catch(() => {\n          this.$emit(\"info\", \"Could not connect to server\", \"red\");\n        });\n      this.register();\n      this.socket.on(this.openfaasUrl + \"_control_test_delete\", (msg) => {\n        for (var i = 0; i < msg.length; i++) {\n          if (msg[i] in this.tests) {\n            delete this.tests[msg[i]];\n          }\n        }\n      });\n      this.socket.on(this.openfaasUrl + \"_control_test_stop\", (msg) => {\n        if (msg in this.tests) {\n          this.tests[msg].status = 0;\n        }\n      });\n    },\n    killRunningTasks() {\n      this.$root.setUpConfirmation(\n        \"Kill all running tasks? Istallation tasks will also be killed\",\n        \"Kill\",\n        () => {\n          fetch(this.url, {\n            method: \"POST\",\n            body: JSON.stringify({ command: 911 }),\n          })\n            .then((data) => data.json())\n            .then((data) => {\n              if (data.success) {\n                this.$emit(\"info\", \"Success\", \"green\");\n                for (var key in this.tests) {\n                  this.tests[key].status = 0;\n                }\n              } else {\n                this.$emit(\n                  \"info\",\n                  \"There was an error killing running tasks\",\n                  \"red\"\n                );\n              }\n            })\n            .catch(() => {\n              this.$emit(\"info\", \"Could not connect to server\", \"red\");\n            });\n        }\n      );\n    },\n    deleteAllProjects() {\n      this.$root.setUpConfirmation(\"Delete all projects?\", \"Delete\", () => {\n        fetch(this.url, {\n          method: \"POST\",\n          body: JSON.stringify({ command: 912 }),\n        })\n          .then((data) => data.json())\n          .then((data) => {\n            if (data.success) {\n              this.$emit(\"info\", \"Success\", \"green\");\n              this.socket.emit(\"clean_up\", {\n                openfaasurl: this.openfaasUrl,\n              });\n              this.tests = {};\n            } else {\n              this.$emit(\"info\", \"There was an error deleting projects\", \"red\");\n            }\n          })\n          .catch(() => {\n            this.$emit(\"info\", \"Could not connect to server\", \"red\");\n          });\n      });\n    },\n    restart(info, pid, sid) {\n      this.start(\n        info.users,\n        info.spawn_rate,\n        info.workers,\n        info.host,\n        info.time,\n        pid,\n        sid\n      );\n    },\n    start(users, spawnRate, workers, host, time, pid, sid) {\n      fetch(this.url, {\n        method: \"POST\",\n        body: JSON.stringify({\n          command: 5,\n          project_name: pid,\n          script_name: sid,\n          users: parseInt(users),\n          spawn_rate: parseInt(spawnRate),\n          workers: parseInt(workers),\n          host: host,\n          time: parseInt(time),\n        }),\n      })\n        .then((data) => data.json())\n        .then((data) => {\n          if (data.success) {\n            const id = data.id;\n            const startedAt = data.started_at;\n            const info = JSON.stringify({\n              users: users,\n              spawn_rate: spawnRate,\n              host: host,\n              workers: workers,\n              time: time,\n              started_at: startedAt,\n            });\n            const status = 1;\n            const valid = true;\n            const test = {\n              id: id,\n              info: info,\n              status: status,\n              valid: valid,\n              project_name: pid,\n              script_name: sid,\n              data: JSON.stringify([]),\n            };\n            this.tests[id] = test;\n            this.socket.emit(\"test_start\", {\n              openfaasurl: this.openfaasUrl,\n              project_name: pid,\n              script_name: sid,\n              test: test,\n            });\n          }\n        })\n        .catch(() => {\n          this.$emit(\"info\", \"Could not connect to server\", \"red\");\n        });\n    },\n    deleteTest(id, pid, sid) {\n      delete this.tests[id];\n      this.socket.emit(\"test_delete\", {\n        openfaasurl: this.openfaasUrl,\n        project_name: pid,\n        script_name: sid,\n        ids: [id],\n      });\n    },\n    deleteProject(project) {\n      this.projects = this.projects.filter((p) => p !== project);\n    },\n  },\n  computed: {\n    reversedTests() {\n      return Object.entries(this.tests).reverse();\n    },\n  },\n  beforeUnmount() {\n    this.socket.emit(\"disconnect_control\");\n    this.socket.off(this.openfaasUrl + \"_control\");\n    this.socket.off(this.openfaasUrl + \"_control_test_delete\");\n    this.socket.off(this.openfaasUrl + \"_control_test_stop\");\n    // console.log(\"control disconnected\")\n  },\n  mounted() {\n    this.init();\n  },\n  updated() {\n    if (this.update) {\n      this.init();\n      this.$root.updated();\n    }\n  },\n};\n</script>\n\n<style>\n</style>","<template>\n<div v-if=\"!mobileAgent\">\n  <div class=\"card project-card\" :id=\"id\">\n    <div class=\"card-body\">\n      <div class=\"row\">\n        <div\n          class=\"col-10 project_name\"\n          data-mdb-toggle=\"tooltip\"\n          title=\"Project name\"\n        >\n          Installing project: {{ id }}\n        </div>\n        <div class=\"col-1\">\n          <div\n            class=\"spinner-border text-primary spinner\"\n            data-mdb-toggle=\"tooltip\"\n            title=\"Running\"\n          ></div>\n        </div>\n        <div class=\"col-1\" data-mdb-toggle=\"tooltip\" title=\"Cancel\">\n          <i class=\"fas fa-times stop-install-project\" @click=\"stop\"></i>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div v-else>\n  <div class=\"card project-card no-width\" :id=\"id\">\n    <div class=\"card-body\">\n\n        <div\n          class=\"vertical-entry project_name\"\n          data-mdb-toggle=\"tooltip\"\n          title=\"Project name\"\n        >\n          Installing project: {{ id }}\n        </div>\n        <div class=\"vertical-entry\" data-mdb-toggle=\"tooltip\" title=\"Cancel\">\n          <i class=\"fas fa-times stop-install-project\" @click=\"stop\"></i>\n        </div>\n\n    </div>\n  </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"InstallationProcess\",\n  props: [\"id\", \"url\", \"openfaasUrl\", \"socket\", \"mobileAgent\"],\n  data() {\n    return {\n      socketIntv: null,\n    };\n  },\n  methods: {\n    stop() {\n      fetch(this.url, {\n        method: \"POST\",\n        body: JSON.stringify({ command: 15, project_name: this.id }),\n      })\n        .then((data) => data.json())\n        .then((data) => {\n          if (data.success) {\n            this.$root.showInfo(\n              this.id + \": installation canceled successfully\",\n              \"green\"\n            );\n            this.$emit(\"delete\");\n          } else {\n            this.$root.showInfo(\n              \"There was an error canceling the installation\",\n              \"red\"\n            );\n          }\n        })\n        .catch(() => {\n          this.$root.showInfo(\"Could not connect to server\", \"red\");\n        });\n    },\n  },\n  beforeUnmount() {\n    if (this.socketIntv) clearInterval(this.socketIntv);\n  },\n  mounted() {\n    this.socketIntv = setInterval(() => {\n      this.socket.emit(\"task_stats\", {\n        project_name: this.id,\n        openfaasurl: this.openfaasUrl,\n      });\n    }, 1000);\n    this.socket.on(this.id, (msg) => {\n      const data = JSON.parse(msg.data);\n      if (!data.success) {\n        console.log(\"Something went wrong\");\n        this.$root.showInfo(\"Something went wrong\", \"red\");\n        clearInterval(this.socketIntv);\n      } else if (data.status_code === 3) {\n        console.log(\"thread is locking\");\n      } else if (data.status_code === 2) {\n        console.log(\"installing project\");\n      } else if (data.status_code === 1) {\n        console.log(\"installing failed\");\n        clearInterval(this.socketIntv);\n        this.$root.showInfo(\n          \"Installation failed\",\n          \"red\",\n          data.error\n        );\n        this.$emit(\"delete\");\n      } else {\n        console.log(\"Task is finished\");\n        clearInterval(this.socketIntv);\n        this.$emit(\"delete\");\n        this.$root.showInfo(\"Installation successs\", \"green\");\n      }\n    });\n  },\n};\n</script>\n\n<style>\n</style>","import { render } from \"./InstallationProcess.vue?vue&type=template&id=157716b4\"\nimport script from \"./InstallationProcess.vue?vue&type=script&lang=js\"\nexport * from \"./InstallationProcess.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/jadkhaddad/Schreibtisch/Openfaas-Performance-Testing-as-a-Service/vue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Control.vue?vue&type=template&id=c9f182b0\"\nimport script from \"./Control.vue?vue&type=script&lang=js\"\nexport * from \"./Control.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/jadkhaddad/Schreibtisch/Openfaas-Performance-Testing-as-a-Service/vue/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}