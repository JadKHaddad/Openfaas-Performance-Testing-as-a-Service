(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dde063f4"],{1276:function(t,e,s){"use strict";var i=s("2ba4"),n=s("c65b"),r=s("e330"),o=s("d784"),a=s("44e7"),c=s("825a"),l=s("1d80"),d=s("4840"),u=s("8aa5"),h=s("50c4"),p=s("577e"),f=s("dc4a"),m=s("4dae"),b=s("14c3"),g=s("9263"),v=s("9f7f"),_=s("d039"),j=v.UNSUPPORTED_Y,O=4294967295,k=Math.min,y=[].push,w=r(/./.exec),x=r(y),S=r("".slice),U=!_((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var s="ab".split(t);return 2!==s.length||"a"!==s[0]||"b"!==s[1]}));o("split",(function(t,e,s){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var r=p(l(this)),o=void 0===s?O:s>>>0;if(0===o)return[];if(void 0===t)return[r];if(!a(t))return n(e,r,t,o);var c,d,u,h=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),b=0,v=new RegExp(t.source,f+"g");while(c=n(g,v,r)){if(d=v.lastIndex,d>b&&(x(h,S(r,b,c.index)),c.length>1&&c.index<r.length&&i(y,h,m(c,1)),u=c[0].length,b=d,h.length>=o))break;v.lastIndex===c.index&&v.lastIndex++}return b===r.length?!u&&w(v,"")||x(h,""):x(h,S(r,b)),h.length>o?m(h,0,o):h}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:n(e,this,t,s)}:e,[function(e,s){var i=l(this),o=void 0==e?void 0:f(e,t);return o?n(o,e,i,s):n(r,p(i),e,s)},function(t,i){var n=c(this),o=p(t),a=s(r,n,o,i,r!==e);if(a.done)return a.value;var l=d(n,RegExp),f=n.unicode,m=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(j?"g":"y"),g=new l(j?"^(?:"+n.source+")":n,m),v=void 0===i?O:i>>>0;if(0===v)return[];if(0===o.length)return null===b(g,o)?[o]:[];var _=0,y=0,w=[];while(y<o.length){g.lastIndex=j?0:y;var U,T=b(g,j?S(o,y):o);if(null===T||(U=k(h(g.lastIndex+(j?y:0)),o.length))===_)y=u(o,y,f);else{if(x(w,S(o,_,y)),w.length===v)return w;for(var $=1;$<=T.length-1;$++)if(x(w,T[$]),w.length===v)return w;y=_=U}}return x(w,S(o,_)),w}]}),!U,j)},"14c3":function(t,e,s){var i=s("da84"),n=s("c65b"),r=s("825a"),o=s("1626"),a=s("c6b6"),c=s("9263"),l=i.TypeError;t.exports=function(t,e){var s=t.exec;if(o(s)){var i=n(s,t,e);return null!==i&&r(i),i}if("RegExp"===a(t))return n(c,t,e);throw l("RegExp#exec called on incompatible receiver")}},"62c8":function(t,e,s){"use strict";s.r(e);s("a4d3"),s("e01a");var i=s("7a23"),n={class:"btn-container"},r=Object(i["h"])("button",{type:"button",class:"btn btn-primary","data-mdb-toggle":"modal","data-mdb-target":"#Modal"}," Start ",-1),o=["disabled"],a={class:"modal fade",id:"Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true"},c={class:"modal-dialog"},l={class:"modal-content"},d=Object(i["h"])("div",{class:"modal-header"},[Object(i["h"])("h5",{class:"modal-title",id:"ModalLabel"},"Start")],-1),u={class:"modal-body"},h={class:"form-outline mb-4"},p=Object(i["h"])("label",{class:"form-label",for:"users-input"},"Users",-1),f={class:"form-outline mb-4"},m=Object(i["h"])("label",{class:"form-label",for:"spawn-rate-input"},"Spawn rate",-1),b={class:"form-outline mb-4"},g=Object(i["h"])("label",{class:"form-label",for:"workers-input"},"Workers",-1),v=Object(i["h"])("div",{class:"form-text",style:{"padding-bottom":"10px"}}," This will overwrite all hosts in your file ",-1),_={class:"form-outline mb-4"},j=Object(i["h"])("label",{class:"form-label",for:"host-input"},"Host",-1),O=Object(i["h"])("div",{class:"form-text",style:{"padding-bottom":"10px"}}," If time is not set, the test will not stop automatically ",-1),k={class:"form-outline mb-4"},y=Object(i["h"])("label",{class:"form-label",for:"time-input"},"Time in seconds",-1),w=Object(i["h"])("div",{class:"form-text",style:{"padding-bottom":"10px"}}," Descripe your test ",-1),x={class:"form-outline mb-4"},S=Object(i["h"])("label",{class:"form-label",for:"description-input"},"Description",-1),U={type:"button",class:"btn btn-primary hidden","data-mdb-dismiss":"modal",id:"dismiss-btn",ref:"dismiss"};function T(t,e,s,T,$,I){var C=Object(i["A"])("Test");return Object(i["v"])(),Object(i["g"])("div",null,[Object(i["h"])("h3",null,Object(i["C"])($.id),1),Object(i["h"])("div",n,[r,Object(i["h"])("button",{type:"button",class:"btn btn-danger",id:"stop-script-tests",onClick:e[0]||(e[0]=function(){return I.stopAll&&I.stopAll.apply(I,arguments)})}," Stop all "),Object(i["h"])("button",{type:"button",class:"btn btn-danger",id:"delete-script-tests",onClick:e[1]||(e[1]=function(){return I.deleteAll&&I.deleteAll.apply(I,arguments)})}," Delete all "),s.mobileAgent?Object(i["f"])("",!0):(Object(i["v"])(),Object(i["g"])("button",{key:0,type:"button",class:"btn btn-primary",id:"check",onClick:e[2]||(e[2]=function(){return I.check&&I.check.apply(I,arguments)}),disabled:$.checkingScript}," Check ",8,o))]),(Object(i["v"])(!0),Object(i["g"])(i["a"],null,Object(i["z"])(I.reversedTests,(function(t){return Object(i["v"])(),Object(i["e"])(C,{key:t[0],id:t[0],info:JSON.parse(t[1].info),data:JSON.parse(t[1].data),status:t[1].status,valid:t[1].valid,showPath:!1,url:s.url,openfaasUrl:s.openfaasUrl,pid:$.pid,sid:$.id,startMinimized:s.minimizeTests,mobileAgent:s.mobileAgent,onRestart:I.restart,onDelete:I.deleteTest,onStop:function(e){return I.stop(t[0])}},null,8,["id","info","data","status","valid","url","openfaasUrl","pid","sid","startMinimized","mobileAgent","onRestart","onDelete","onStop"])})),128)),Object(i["h"])("div",a,[Object(i["h"])("div",c,[Object(i["h"])("div",l,[d,Object(i["h"])("div",u,[Object(i["h"])("form",null,[Object(i["h"])("div",h,[Object(i["I"])(Object(i["h"])("input",{type:"text",id:"users-input",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=function(t){return $.users=t})},null,512),[[i["F"],$.users]]),p]),Object(i["h"])("div",f,[Object(i["I"])(Object(i["h"])("input",{type:"text",id:"spawn-rate-input",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=function(t){return $.spawnRate=t})},null,512),[[i["F"],$.spawnRate]]),m]),Object(i["h"])("div",b,[Object(i["I"])(Object(i["h"])("input",{type:"text",id:"workers-input",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=function(t){return $.workers=t})},null,512),[[i["F"],$.workers]]),g]),v,Object(i["h"])("div",_,[Object(i["I"])(Object(i["h"])("input",{type:"text",id:"host-input",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=function(t){return $.host=t})},null,512),[[i["F"],$.host]]),j]),O,Object(i["h"])("div",k,[Object(i["I"])(Object(i["h"])("input",{type:"text",id:"time-input",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=function(t){return $.time=t})},null,512),[[i["F"],$.time]]),y]),w,Object(i["h"])("div",x,[Object(i["I"])(Object(i["h"])("input",{type:"text",id:"description-input",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=function(t){return $.description=t})},null,512),[[i["F"],$.description]]),S]),Object(i["h"])("button",{type:"button",class:"btn btn-primary btn-block",id:"start-btn",onClick:e[9]||(e[9]=function(){return I.startFromModal&&I.startFromModal.apply(I,arguments)})}," Start ")]),Object(i["h"])("button",U,null,512)])])])])])}s("d3b7"),s("159b"),s("e9c4"),s("b64b"),s("ac1f"),s("1276"),s("4fad");var $=s("864c"),I={name:"Script",components:{Test:$["a"]},props:["url","openfaasUrl","oldOpenfaasUrl","socket","minimizeTests","update","mobileAgent"],data:function(){return{id:this.$route.params.id,pid:this.$route.params.pid,tests:{},users:"",spawnRate:"",workers:"",host:"",time:"",description:"",checkingScript:!1}},methods:{register:function(t){var e=this;this.socket.off(this.openfaasUrl+"_"+this.pid+"_"+this.id),this.socket.emit("register_script",{openfaasurl:this.openfaasUrl,project_name:this.pid,script_name:this.id,test_ids:t}),this.socket.on(this.openfaasUrl+"_"+this.pid+"_"+this.id,(function(t){if(IsJsonString(t)&&(t=JSON.parse(t),t.success))for(var s=0;s<t.tests.length;s++){var i=t.tests[s].id;if(i in e.tests){var n=t.tests[s].status;0===n?(e.disconnectTest(i),e.tests[i].status=0):1===n?e.tests[i].data=t.tests[s].data:3===n&&(e.tests[i].valid=!1,e.$emit("info",i+": There was an error running this test","red"),e.disconnectTest(i))}}}))},registerTest:function(t){this.socket.emit("register_test",{openfaasurl:this.openfaasUrl,project_name:this.pid,script_name:this.id,test_id:t})},disconnectTest:function(t){this.socket.emit("disconnect_test",{openfaasurl:this.openfaasUrl,project_name:this.pid,script_name:this.id,test_id:t})},init:function(){var t=this;this.host=localStorage.getItem("last_host"),document.querySelectorAll(".form-outline").forEach((function(t){new mdb.Input(t).init()})),fetch(this.url,{method:"POST",body:JSON.stringify({command:7,project_name:this.pid,script_name:this.id})}).then((function(t){return t.json()})).then((function(e){if(e.success){var s=[];for(var i in e.tests)1===e.tests[i].status&&s.push(e.tests[i].id);t.register(s),t.tests=e.tests}})).catch((function(e){t.$emit("info","Could not connect to server","red")})),this.socket.on(this.openfaasUrl+"_"+this.pid+"_"+this.id+"_test_start",(function(e){e.id in t.tests||(t.tests[e.id]=e,t.registerTest(e.id))})),this.socket.on(this.openfaasUrl+"_"+this.pid+"_"+this.id+"_test_delete",(function(e){for(var s=0;s<e.length;s++)e[s]in t.tests&&(delete t.tests[e[s]],t.disconnectTest(e[s]))})),this.socket.on(this.openfaasUrl+"_project_delete_"+this.pid,(function(e){t.$emit("info",t.pid+" is deleted","green"),t.$router.push({name:"Home"})}))},stopAll:function(){var t=this;this.$root.setUpConfirmation(this.id+": Are you sure you want to stop all tests?","Stop",(function(){fetch(t.url,{method:"POST",body:JSON.stringify({command:17,project_name:t.pid,script_name:t.id})}).then((function(t){return t.json()})).then((function(e){if(e.success)for(var s in t.$emit("info","Success","green"),t.socket.emit("disconnect_script",{project_name:t.pid,script_name:t.id}),t.tests)t.tests[s].status=0;else t.$emit("info","There was an error stopping tests","red")})).catch((function(){this.$emit("info","Could not connect to server","red")}))}))},deleteAll:function(){var t=this;this.$root.setUpConfirmation(this.id+": Are you sure you want to delete all tests?","Delete",(function(){fetch(t.url,{method:"POST",body:JSON.stringify({command:16,project_name:t.pid,script_name:t.id})}).then((function(t){return t.json()})).then((function(e){e.success?(t.$emit("info","Success","green"),t.socket.emit("disconnect_script",{project_name:t.pid,script_name:t.id}),t.socket.emit("test_delete",{openfaasurl:t.openfaasUrl,project_name:t.pid,script_name:t.id,ids:Object.keys(t.tests)}),t.tests={}):t.$emit("info","There was an error deleting tests","red")})).catch((function(){this.$emit("info","Could not connect to server","red")}))}))},start:function(t,e,s,i,n,r){var o=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:5,project_name:this.pid,script_name:this.id,users:parseInt(t),spawn_rate:parseInt(e),workers:parseInt(s),host:i,time:parseInt(n),description:r})}).then((function(t){return t.json()})).then((function(a){if(a.success){var c=a.id,l=a.started_at,d=JSON.stringify({users:t,spawn_rate:e,host:i,workers:s,time:n,description:r,started_at:l}),u=1,h=!0,p={id:c,info:d,status:u,valid:h,data:JSON.stringify([])};o.tests[c]=p,o.registerTest(c),o.socket.emit("test_start",{openfaasurl:o.openfaasUrl,project_name:o.pid,script_name:o.id,test:p})}else o.$emit("info",a.message,"red")})).catch((function(){o.$emit("info","Could not connect to server","red")}))},startFromModal:function(){return null!=this.host&&-1==this.host.indexOf("http://")&&-1==this.host.indexOf("https://")&&""!=this.host&&(this.host="http://"+this.host),""===this.users?(this.$emit("info","Users cant be empty","red"),!1):isInteger(this.users)?""===this.spawnRate?(this.$emit("info","Spawn rate cant be empty","red"),!1):isInteger(this.spawnRate)?""===this.workers||isInteger(this.workers)?""==this.time||isInteger(this.time)?(this.$refs.dismiss.click(),""!=this.host&&null!=this.host&&localStorage.setItem("last_host",this.host),void this.start(this.users,this.spawnRate,this.workers,this.host,this.time,this.description)):(this.$emit("info","Time must be an integer","red"),!1):(this.$emit("info","workers must be an integer","red"),!1):(this.$emit("info","Spawn rate must be an integer","red"),!1):(this.$emit("info","Users must be an integer","red"),!1)},restart:function(t){this.start(t.users,t.spawn_rate,t.workers,t.host,t.time,t.description)},deleteTest:function(t){delete this.tests[t],this.socket.emit("test_delete",{openfaasurl:this.openfaasUrl,project_name:this.pid,script_name:this.id,ids:[t]}),this.disconnectTest(t)},stop:function(t){this.socket.emit("test_stop",{openfaasurl:this.openfaasUrl,id:t})},check:function(){var t=this;this.checkingScript=!0,fetch(this.url,{method:"POST",body:JSON.stringify({command:916,project_name:this.pid,script_name:this.id})}).then((function(t){return t.json()})).then((function(e){e.success?(t.$root.setTestOutput(e.out.split("\n")),t.$router.push({name:"Check",params:{script:t.id}})):t.$emit("info","Could not connect to server","red"),t.checkingScript=!1})).catch((function(e){t.checkingScript=!1,t.$emit("info","Could not connect to server","red")}))}},computed:{reversedTests:function(){return Object.entries(this.tests).reverse()}},beforeUnmount:function(){this.socket.emit("disconnect_script",{project_name:this.pid,script_name:this.id}),this.socket.off(this.openfaasUrl+"_"+this.pid+"_"+this.id),this.socket.off(this.openfaasUrl+"_"+this.pid+"_"+this.id+"_test_start"),this.socket.off(this.openfaasUrl+"_"+this.pid+"_"+this.id+"_test_delete"),this.socket.off(this.openfaasUrl+"_project_delete_"+this.pid)},mounted:function(){this.init()},updated:function(){this.update&&(this.socket.emit("disconnect_script",{project_name:this.pid,script_name:this.id}),this.socket.off(this.oldOpenfaasUrl+"_"+this.pid+"_"+this.id),this.init(),this.$root.updated())}},C=s("6b0d"),A=s.n(C);const R=A()(I,[["render",T]]);e["default"]=R},"8aa5":function(t,e,s){"use strict";var i=s("6547").charAt;t.exports=function(t,e,s){return e+(s?i(t,e).length:1)}},d784:function(t,e,s){"use strict";s("ac1f");var i=s("e330"),n=s("6eeb"),r=s("9263"),o=s("d039"),a=s("b622"),c=s("9112"),l=a("species"),d=RegExp.prototype;t.exports=function(t,e,s,u){var h=a(t),p=!o((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),f=p&&!o((function(){var e=!1,s=/a/;return"split"===t&&(s={},s.constructor={},s.constructor[l]=function(){return s},s.flags="",s[h]=/./[h]),s.exec=function(){return e=!0,null},s[h](""),!e}));if(!p||!f||s){var m=i(/./[h]),b=e(h,""[t],(function(t,e,s,n,o){var a=i(t),c=e.exec;return c===r||c===d.exec?p&&!o?{done:!0,value:m(e,s,n)}:{done:!0,value:a(s,e,n)}:{done:!1}}));n(String.prototype,t,b[0]),n(d,h,b[1])}u&&c(d[h],"sham",!0)}}}]);
//# sourceMappingURL=chunk-dde063f4.82185159.js.map