(function(t){function e(e){for(var s,i,c=e[0],r=e[1],l=e[2],u=0,f=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);d&&d(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,c=1;c<n.length;c++){var r=n[c];0!==o[r]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},o={app:0},a=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=r;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("7a23"),o={type:"button",class:"btn btn-primary hidden","data-mdb-toggle":"modal","data-mdb-target":"#Info-Modal",id:"info-modal-button",ref:"infoModalButton"},a={class:"modal fade",id:"Info-Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true",ref:"infoModal"},i={class:"modal-dialog"},c={class:"modal-content"},r={class:"modal-body info-message-container"},l={key:0},d={id:"info-error"},u={type:"button",class:"btn btn-primary hidden","data-mdb-toggle":"modal","data-mdb-target":"#Confirmation-Modal",id:"confirmation-modal-button",ref:"confirmationModalButton"},f={class:"modal fade",id:"Confirmation-Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true"},b={class:"modal-dialog"},m={class:"modal-content"},g={class:"modal-body"},p=Object(s["g"])("h3",{id:"confirm-message"},null,-1),h={class:"modal-footer"};function O(t,e,n,O,j,v){var k=Object(s["z"])("NavBar"),y=Object(s["z"])("router-view");return Object(s["u"])(),Object(s["f"])(s["a"],null,[Object(s["j"])(k,{runningTests:j.runningTests,openfaasUrl:j.openfaasUrl,direct:j.direct,noOpenfaas:j.noOpenfaas,functionName:j.functionName,minimizeTests:j.minimizeTests,darkTheme:j.darkTheme,noRedges:j.noRedges,onDefault:v.setDefaults,onSettings:v.updateSettings},null,8,["runningTests","openfaasUrl","direct","noOpenfaas","functionName","minimizeTests","darkTheme","noRedges","onDefault","onSettings"]),Object(s["j"])(y,{url:j.url,openfaasUrl:j.openfaasUrl,socket:j.socket,minimizeTests:j.minimizeTests,update:j.update,onInfo:v.showInfo},null,8,["url","openfaasUrl","socket","minimizeTests","update","onInfo"]),Object(s["g"])("div",null,[Object(s["g"])("button",o,null,512)]),Object(s["g"])("div",a,[Object(s["g"])("div",i,[Object(s["g"])("div",c,[Object(s["g"])("div",r,[Object(s["g"])("div",null,[Object(s["g"])("label",{id:"info-message",class:Object(s["p"])({green:"green"===j.infoColor,red:"red"===j.infoColor})},Object(s["B"])(j.infoMessage),3)]),j.infoError?(Object(s["u"])(),Object(s["f"])("div",l,[Object(s["g"])("label",d,Object(s["B"])(j.infoErrorText),1)])):Object(s["e"])("",!0)])])])],512),Object(s["g"])("div",null,[Object(s["g"])("button",u,null,512)]),Object(s["g"])("div",f,[Object(s["g"])("div",b,[Object(s["g"])("div",m,[Object(s["g"])("div",g,[p,Object(s["i"])(" "+Object(s["B"])(j.confirmMessage),1)]),Object(s["g"])("div",h,[Object(s["g"])("button",{type:"button",class:"btn btn-danger","data-mdb-dismiss":"modal",ref:"confirmBtn"},Object(s["B"])(j.confirmButtonText),513)])])])])],64)}n("d3b7"),n("159b");var j={class:"navbar navbar-expand-lg navbar-light bg-white fixed-top"},v={class:"container-fluid"},k=Object(s["g"])("button",{class:"navbar-toggler",type:"button","data-mdb-toggle":"collapse","data-mdb-target":"#navbarTop","aria-controls":"navbarTop","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(s["g"])("i",{class:"fas fa-bars"})],-1),y={class:"collapse navbar-collapse",id:"navbarTop"},I={class:"navbar-nav me-auto mb-2 mb-lg-0"},T={class:"nav-item active"},S=Object(s["i"])("Home"),w={class:"nav-item active"},C=Object(s["i"])("Control"),R={class:"nav-item"},U=Object(s["i"])("License"),N=Object(s["g"])("li",{class:"nav-item"},[Object(s["g"])("a",{class:"nav-link","aria-current":"page",href:"https://github.com/JadKHaddad/Openfaas-Performance-Testing-as-a-Service"},"Source")],-1),_={class:"nav-item"},M=Object(s["i"])("OpenFaaS"),B={class:"nav-item"},x=Object(s["g"])("i",{class:"fas fa-cog",id:"gear"},null,-1),P={id:"url",style:{"font-weight":"bold"}},D={class:"modal fade",id:"Url-Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true"},z={class:"modal-dialog"},E={class:"modal-content"},A={class:"modal-body"},J={class:"form-outline mb-4"},H=["disabled"],L=Object(s["g"])("label",{class:"form-label",for:"url-input"},"OpenFaaS url",-1),F={class:"form-check","data-mdb-toggle":"tooltip",title:"Can the brwoser connect to OpenFaas directly?"},G=["disabled"],V=Object(s["g"])("label",{class:"form-check-label",for:"direct-checkbox"}," Direct connection ",-1),W={class:"form-check","data-mdb-toggle":"tooltip",title:"No OpenFaaS-Server is being used"},q=Object(s["g"])("label",{class:"form-check-label",for:"no-openfaas-checkbox"}," No OpenFaaS ",-1),K={class:"form-check"},Y=Object(s["g"])("label",{class:"form-check-label",for:"dark-theme-checkbox"}," Dark theme ",-1),X={class:"form-check"},Q=Object(s["g"])("label",{class:"form-check-label",for:"i-do-not-like-rounded-edges-checkbox"}," I don't like rounded edges ",-1),Z={class:"form-check","data-mdb-toggle":"tooltip",title:"Tests will be minimized by default"},tt=Object(s["g"])("label",{class:"form-check-label",for:"minimized"}," Minimize tests ",-1),et={key:0,id:"url-message"},nt={class:"modal-footer"},st={key:0,class:"spinner-border text-primary spinner",id:"url-spinner"},ot=["disabled"],at={type:"button",class:"btn btn-primary hidden","data-mdb-dismiss":"modal",id:"dismiss-url-modal-btn",ref:"dismissBtn"},it=Object(s["g"])("div",null,[Object(s["g"])("button",{type:"button",class:"btn btn-primary hidden","data-mdb-toggle":"modal","data-mdb-target":"#Url-Modal",id:"url-modal-button"})],-1),ct={id:"server-stats"},rt=Object(s["i"])(" Running tests: "),lt={id:"running-tests-label"};function dt(t,e,n,o,a,i){var c=Object(s["z"])("router-link");return Object(s["u"])(),Object(s["f"])("div",null,[Object(s["g"])("header",null,[Object(s["g"])("nav",j,[Object(s["g"])("div",v,[k,Object(s["g"])("div",y,[Object(s["g"])("ul",I,[Object(s["g"])("li",T,[Object(s["j"])(c,{to:"/",class:"nav-link","aria-current":"page"},{default:Object(s["G"])((function(){return[S]})),_:1})]),Object(s["g"])("li",w,[Object(s["j"])(c,{to:"/control",class:"nav-link","aria-current":"page"},{default:Object(s["G"])((function(){return[C]})),_:1})]),Object(s["g"])("li",R,[Object(s["j"])(c,{to:"/license",class:"nav-link","aria-current":"page"},{default:Object(s["G"])((function(){return[U]})),_:1})]),N,Object(s["g"])("li",_,[Object(s["j"])(c,{to:"/openfaas",class:"nav-link","aria-current":"page"},{default:Object(s["G"])((function(){return[M]})),_:1})]),Object(s["g"])("li",B,[Object(s["g"])("a",{onClick:e[0]||(e[0]=function(){return i.setUp&&i.setUp.apply(i,arguments)}),class:"nav-link","aria-current":"page",id:"nav-url",href:"#","data-mdb-toggle":"modal","data-mdb-target":"#Url-Modal"},[x,Object(s["g"])("label",P,Object(s["B"])(n.openfaasUrl),1)])])])])])])]),Object(s["g"])("div",D,[Object(s["g"])("div",z,[Object(s["g"])("div",E,[Object(s["g"])("div",A,[Object(s["g"])("form",null,[Object(s["g"])("div",J,[Object(s["H"])(Object(s["g"])("input",{type:"text",id:"url-input",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.tempOpenfaasUrl=t}),disabled:a.tempNoOpenfaas},null,8,H),[[s["E"],a.tempOpenfaasUrl]]),L]),Object(s["g"])("div",F,[Object(s["H"])(Object(s["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"direct-checkbox","onUpdate:modelValue":e[2]||(e[2]=function(t){return a.tempDirect=t}),disabled:a.tempNoOpenfaas},null,8,G),[[s["D"],a.tempDirect]]),V]),Object(s["g"])("div",W,[Object(s["H"])(Object(s["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"no-openfaas-checkbox","onUpdate:modelValue":e[3]||(e[3]=function(t){return a.tempNoOpenfaas=t})},null,512),[[s["D"],a.tempNoOpenfaas]]),q]),Object(s["g"])("div",K,[Object(s["H"])(Object(s["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"dark-theme-checkbox","onUpdate:modelValue":e[4]||(e[4]=function(t){return a.tempDarkTheme=t})},null,512),[[s["D"],a.tempDarkTheme]]),Y]),Object(s["g"])("div",X,[Object(s["H"])(Object(s["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"i-do-not-like-rounded-edges-checkbox","onUpdate:modelValue":e[5]||(e[5]=function(t){return a.tempNoRedges=t})},null,512),[[s["D"],a.tempNoRedges]]),Q]),Object(s["g"])("div",Z,[Object(s["H"])(Object(s["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"minimized","onUpdate:modelValue":e[6]||(e[6]=function(t){return a.tempMinimizeTests=t})},null,512),[[s["D"],a.tempMinimizeTests]]),tt]),Object(s["g"])("div",null,[a.error?(Object(s["u"])(),Object(s["f"])("label",et,"Could not connect to openfaas")):Object(s["e"])("",!0)])])]),Object(s["g"])("div",nt,[a.loading?(Object(s["u"])(),Object(s["f"])("div",st)):Object(s["e"])("",!0),Object(s["g"])("button",{type:"button",class:"btn btn-danger",id:"restore-defaults-btn",onClick:e[7]||(e[7]=function(){return i.restoreDefault&&i.restoreDefault.apply(i,arguments)})}," Restore defaults "),Object(s["g"])("button",{type:"button",class:"btn btn-primary",id:"set-url-btn",onClick:e[8]||(e[8]=function(){return i.ok&&i.ok.apply(i,arguments)}),disabled:a.loading}," Ok ",8,ot)]),Object(s["g"])("button",at,null,512)])])]),it,Object(s["g"])("div",ct,[rt,Object(s["g"])("label",lt,Object(s["B"])(n.runningTests),1)])])}n("ac1f"),n("5319"),n("e9c4"),n("fb6a");var ut={name:"NavBar",props:["runningTests","openfaasUrl","direct","noOpenfaas","functionName","minimizeTests","darkTheme","noRedges"],data:function(){return{tempOpenfaasUrl:"None",tempDirect:null,tempNoOpenfaas:null,tempDarkTheme:null,tempNoRedges:null,tempMinimizeTests:null,loading:!1,error:!1}},methods:{setUp:function(){this.noOpenfaas||(this.tempOpenfaasUrl=this.openfaasUrl),this.tempDirect=this.direct,this.tempNoOpenfaas=this.noOpenfaas,this.tempDarkTheme=this.darkTheme,this.tempNoRedges=this.noRedges,this.tempMinimizeTests=this.minimizeTests},restoreDefault:function(){this.$refs.dismissBtn.click(),this.$emit("default")},ok:function(){var t=this,e=function(e,n){var s={baseUrl:n,openfaasUrl:e,direct:t.tempDirect,noOpenfaas:t.tempNoOpenfaas,darkTheme:t.tempDarkTheme,noRedges:t.tempNoRedges,minimizeTests:t.tempMinimizeTests};t.loading=!1,t.error=!1,t.$refs.dismissBtn.click(),t.$emit("settings",s)};if(this.tempNoOpenfaas)e("None","/local");else{var n=this.tempOpenfaasUrl;n=n.replace("http://","").replace("https://",""),n="http://"+n,this.loading=!0,this.error=!1,fetch("/check_connection",{method:"POST",body:JSON.stringify({url:n})}).then((function(t){return t.json()})).then((function(s){if(s.success){"/"==n.slice(-1)&&(n=n.slice(0,-1));var o="".concat(n,"/function/ptas");t.tempDirect||(o="/proxy"),e(n,o)}else t.loading=!1,t.error=!0})).catch((function(){t.loading=!1,t.$root.showInfo("Could not connect to server","red")}))}}},created:function(){this.setUp()},mounted:function(){$.fn.animateRotate=function(t,e,n,s){var o=$.speed(e,n,s),a=o.step;return this.each((function(e,n){o.complete=$.proxy(o.complete,n),o.step=function(t){if($.style(n,"transform","rotate("+t+"deg)"),a)return a.apply(n,arguments)},$({deg:0}).animate({deg:t},o)}))},$("#nav-url").on("click",(function(){return $("#gear").animateRotate(180),$("*").bind("click.myEvents",(function(t){t.currentTarget==$("#Url-Modal")[0]&&($("#gear").animateRotate(-180),$("*").off(".myEvents")),t.stopPropagation()})),!1}))}},ft=n("6b0d"),bt=n.n(ft);const mt=bt()(ut,[["render",dt]]);var gt=mt,pt={name:"App",components:{NavBar:gt},data:function(){return{openfaasUrl:"None",direct:!0,noOpenfaas:!0,functionName:"ptas",darkTheme:!1,noRedges:!1,minimizeTests:!1,update:!1,url:"/local",runningTests:0,socket:null,socketIntv:null,infoMessage:"info",infoColor:"green",infoError:!0,infoErrorText:"error",confirmMessage:"confirm",confirmButtonText:"confirm"}},methods:{configureConnections:function(){var t=this;this.socket=io(""),this.socketIntv=setInterval((function(){t.socket.emit("server_stats",{openfaasurl:t.openfaasUrl})}),1e3),this.socket.on("server_stats",(function(e){var n=JSON.parse(e.data);n.success?t.runningTests=n.count:(clearInterval(t.socketIntv),t.runningTests=0)}))},showInfo:function(t,e,n){this.infoMessage=t,this.infoColor=e,null!=n&&"None"!=n?(this.infoError=!0,this.infoErrorText=n):this.infoError=!1,$(this.$refs.infoModal).hasClass("show")||$(this.$refs.infoModalButton).click()},setUpConfirmation:function(t,e,n){this.confirmMessage=t,this.confirmButtonText=e,$(this.$refs.confirmBtn).off("click").on("click",n),$(this.$refs.confirmationModalButton).click()},updateSettings:function(t){this.url=t.baseUrl,this.openfaasUrl=t.openfaasUrl,this.direct=t.direct,this.noOpenfaas=t.noOpenfaas,this.darkTheme=t.darkTheme,this.noRedges=t.noRedges,this.minimizeTests=t.minimizeTests,localStorage.setItem("url",this.url),localStorage.setItem("openfaasUrl",this.openfaasUrl),localStorage.setItem("direct",this.direct),localStorage.setItem("noOpenfaas",this.noOpenfaas),localStorage.setItem("darkTheme",this.darkTheme),localStorage.setItem("noRedges",this.noRedges),localStorage.setItem("minimizeTests",this.minimizeTests),this.update=!0,console.log("updated"),console.log(t)},updated:function(){this.update=!1},setDefaults:function(){var t=this;fetch("/defaults",{method:"POST"}).then((function(t){return t.json()})).then((function(e){e.openfaas_url?(t.noOpenfaas=!1,t.openfaasUrl=e.openfaas_url,t.url="".concat(t.openfaasUrl,"/function/ptas"),e.direct||(t.url="/proxy")):(t.openfaasUrl="None",t.url="/local",t.noOpenfaas=!0),t.direct=e.direct,localStorage.setItem("url",t.url),localStorage.setItem("openfaasUrl",t.openfaasUrl),localStorage.setItem("direct",t.direct),localStorage.setItem("noOpenfaas",t.noOpenfaas),console.log(t.openfaasUrl),console.log(t.url)})).catch((function(){}))}},created:function(){localStorage.getItem("url")&&(this.url=localStorage.getItem("url")),localStorage.getItem("openfaasUrl")&&(this.openfaasUrl=localStorage.getItem("openfaasUrl")),localStorage.getItem("direct")&&(this.direct=JSON.parse(localStorage.getItem("direct"))),localStorage.getItem("noOpenfaas")&&(this.noOpenfaas=JSON.parse(localStorage.getItem("noOpenfaas"))),localStorage.getItem("darkTheme")&&(this.darkTheme=JSON.parse(localStorage.getItem("darkTheme"))),localStorage.getItem("noRedges")&&(this.noRedges=JSON.parse(localStorage.getItem("noRedges"))),localStorage.getItem("minimizeTests")&&(this.minimizeTests=JSON.parse(localStorage.getItem("minimizeTests"))),localStorage.getItem("url")&&localStorage.getItem("openfaasUrl")&&localStorage.getItem("direct")||this.setDefaults()},mounted:function(){document.querySelectorAll(".form-outline").forEach((function(t){new mdb.Input(t).init()})),this.configureConnections()}};const ht=bt()(pt,[["render",O]]);var Ot=ht,jt=n("6c02"),vt={class:"btn-container"},kt=["disabled"],yt=["disabled"],It={class:"list-group"},Tt={class:"form-check"},St=["value","id"],wt={class:"test-label"},Ct={class:"modal fade",id:"Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true"},Rt={class:"modal-dialog"},Ut={class:"modal-content"},$t=Object(s["g"])("div",{class:"modal-header"},[Object(s["g"])("h5",{class:"modal-title",id:"ModalLabel"},"Add a new Project")],-1),Nt={class:"modal-body"},_t={class:"form-outline mb-4"},Mt={type:"file",webkitdirectory:"",mozdirectory:"",id:"project-input",ref:"files"},Bt={class:"btn-container"},xt={key:0,class:"spinner-border text-primary spinner",id:"spinner"};function Pt(t,e,n,o,a,i){var c=Object(s["z"])("router-link");return Object(s["u"])(),Object(s["f"])("div",null,[Object(s["g"])("div",vt,[Object(s["g"])("button",{type:"button",class:"btn btn-primary","data-mdb-toggle":"modal","data-mdb-target":"#Modal",id:"add-btn-Modal",disabled:a.loading}," Add a new project ",8,kt),Object(s["g"])("button",{type:"button",class:"btn btn-danger",id:"delete-project",disabled:!i.enableDelete,onClick:e[0]||(e[0]=function(){return i.deleteProjects&&i.deleteProjects.apply(i,arguments)})}," Delete ",8,yt)]),Object(s["g"])("div",It,[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["y"])(a.projects,(function(t){return Object(s["u"])(),Object(s["f"])("a",{key:t,class:"list-group-item list-group-item-action"},[Object(s["g"])("div",Tt,[Object(s["H"])(Object(s["g"])("input",{class:"form-check-input",type:"checkbox",value:t,"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.markedProjects=t}),id:t},null,8,St),[[s["D"],a.markedProjects]]),Object(s["j"])(c,{to:{name:"Project",params:{id:t}}},{default:Object(s["G"])((function(){return[Object(s["g"])("label",wt,Object(s["B"])(t),1)]})),_:2},1032,["to"])])])})),128))]),Object(s["g"])("div",Ct,[Object(s["g"])("div",Rt,[Object(s["g"])("div",Ut,[$t,Object(s["g"])("div",Nt,[Object(s["g"])("form",null,[Object(s["g"])("div",_t,[Object(s["g"])("input",Mt,null,512)]),Object(s["g"])("button",{type:"button",class:"btn btn-primary btn-block",id:"add-btn","data-mdb-dismiss":"modal",onClick:e[2]||(e[2]=function(){return i.upload&&i.upload.apply(i,arguments)})}," Add ")])])])])]),Object(s["g"])("div",Bt,[a.loading?(Object(s["u"])(),Object(s["f"])("div",xt)):Object(s["e"])("",!0)])])}n("4de4"),n("caad"),n("2532");var Dt={name:"Home",props:["url","openfaasUrl","socket","update"],data:function(){return{projects:[],loading:!1,files:null,socketIntv:null,markedProjects:[],projectId:""}},methods:{init:function(){var t=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:3})}).then((function(t){return t.json()})).then((function(e){e.success?(t.projects=e.projects,console.log(e)):t.$emit("info","Could not connect to server","red")})).catch((function(){t.$emit("info","Could not connect to server","red")}))},upload:function(){var t=this;this.loading=!0;var e=this.$refs.files.files;if(e.length<1)return this.$emit("info","Please select a directory to upload","red"),this.loading=!1,!1;for(var n=new FormData,s=0;s<e.length;s++)n.append("file"+s,e[s]);return fetch(this.url,{method:"POST",body:n}).then((function(t){return t.json()})).then((function(e){console.log(e),e.success?(t.projectId=e.task_id,t.socketIntv=setInterval((function(){t.socket.emit("task_stats",{project_name:t.projectId,openfaasurl:t.openfaasUrl})}),1e3),t.socket.on(t.projectId,(function(e){var n=JSON.parse(e.data);n.success?3===n.status_code?console.log("thread is locking"):2===n.status_code?console.log("installing project"):1===n.status_code?(console.log("installing failed"),clearInterval(t.socketIntv),t.loading=!1,t.$emit("info","Installation failed","red",n.error)):(console.log("Task is finished"),clearInterval(t.socketIntv),t.$router.push({name:"Project",params:{id:t.projectId}})):(console.log("Something went wrong"),t.loading=!1,t.$emit("info","Something went wrong","red"),clearInterval(t.socketIntv))}))):(t.loading=!1,t.$emit("info",e.message,"red"))})).catch((function(){t.loading=!1,t.$emit("info","Something went wrong","red")})),!1},deleteProjects:function(){var t=this;this.$root.setUpConfirmation("Are you sure you want to delete these projects?","Delete",(function(){return fetch(t.url,{method:"POST",body:JSON.stringify({command:10,names:t.markedProjects})}).then((function(t){return t.json()})).then((function(){t.projects=t.projects.filter((function(e){return!t.markedProjects.includes(e)})),t.markedProjects=[]})).catch((function(){t.$emit("info","Could not connect to server","red")})),!1}))}},computed:{enableDelete:function(){return this.markedProjects.length>0}},beforeUnmount:function(){this.socket.off(this.projectId),this.socketIntv&&clearInterval(this.socketIntv)},mounted:function(){this.init()},updated:function(){this.update&&(this.init(),this.$root.updated())}};const zt=bt()(Dt,[["render",Pt]]);var Et=zt,At={class:"control-btn-container"};function Jt(t,e,n,o,a,i){var c=Object(s["z"])("InstallationProcess"),r=Object(s["z"])("Test");return Object(s["u"])(),Object(s["f"])("div",null,[Object(s["g"])("div",At,[Object(s["g"])("button",{type:"button",class:"btn btn-danger btn-block control-btn",id:"kill-btn",onClick:e[0]||(e[0]=function(){return i.killRunningTasks&&i.killRunningTasks.apply(i,arguments)})}," Kill running tasks "),Object(s["g"])("button",{type:"button",class:"btn btn-danger btn-block control-btn",id:"cleanup-btn",onClick:e[1]||(e[1]=function(){return i.deleteAllProjects&&i.deleteAllProjects.apply(i,arguments)})}," Delete all projects ")]),(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["y"])(a.projects,(function(t){return Object(s["u"])(),Object(s["d"])(c,{key:t,id:t,url:n.url,openfaasUrl:n.openfaasUrl,socket:n.socket,onDelete:function(e){return i.deleteProject(t)}},null,8,["id","url","openfaasUrl","socket","onDelete"])})),128)),(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["y"])(a.tests,(function(t){return Object(s["u"])(),Object(s["d"])(r,{key:t,test:t.info,showPath:!0,url:n.url,openfaasUrl:n.openfaasUrl,socket:n.socket,pid:t.project_name,sid:t.script_name,startMinimized:n.minimizeTests,onRestart:i.restart,onDelete:function(e){return i.deleteTest(t)}},null,8,["test","url","openfaasUrl","socket","pid","sid","startMinimized","onRestart","onDelete"])})),128))])}n("00b4"),n("25f0"),n("33d1"),n("ea98");var Ht=["id"],Lt={class:"test-container"},Ft={class:"buttons btn-container"},Gt=["disabled"],Vt=["disabled"],Wt=["disabled"],qt=["disabled"],Kt={key:0,class:"img-container"},Yt=["src"],Xt=["src"],Qt={key:1,class:"path"},Zt=Object(s["i"])("    "),te=Object(s["g"])("i",{class:"fas fa-angle-right"},null,-1),ee=Object(s["i"])("    "),ne=["title"],se={class:"card-header"},oe={class:"row"},ae={"data-mdb-toggle":"tooltip",title:"Test id"},ie={class:"col-1","data-mdb-toggle":"tooltip",title:"Users"},ce=Object(s["g"])("i",{class:"fas fa-user-alt"},null,-1),re={class:"col-1","data-mdb-toggle":"tooltip",title:"Spawn rate"},le=Object(s["g"])("i",{class:"fas fa-users"},null,-1),de={class:"col-1","data-mdb-toggle":"tooltip",title:"Workers"},ue=Object(s["g"])("i",{class:"fas fa-hard-hat"},null,-1),fe={class:"col-3","data-mdb-toggle":"tooltip",title:"Host"},be=Object(s["g"])("i",{class:"fas fa-globe"},null,-1),me={class:"col-1","data-mdb-toggle":"tooltip",title:"Time is seconds"},ge=Object(s["g"])("i",{class:"fas fa-clock"},null,-1),pe={key:0,class:"col-1 elapsed","data-mdb-toggle":"tooltip",title:"Elapsed time is seconds"},he=Object(s["g"])("i",{class:"fas fa-stopwatch"},null,-1),Oe={class:"elapsed-text"},je={class:"col-1"},ve={key:0,class:"spinner-border text-primary spinner","data-mdb-toggle":"tooltip",title:"Running"},ke={key:1,class:"fas fa-check check"},ye={key:2,class:"fas fa-times not-valid"},Ie=Object(s["h"])('<div class="container-fluid"><div class="row"><div class="col-1">Type</div><div class="col-2">Name</div><div class="col-1">Requests</div><div class="col-1">Fails</div><div class="col-1">Med</div><div class="col-1">Avg (ms)</div><div class="col-1">Min (ms)</div><div class="col-1">Max (ms)</div><div class="col-1">Avg size (bytes)</div><div class="col-1">RPS</div><div class="col-1">FPS</div></div></div>',1),Te={key:0,class:"container-fluid results"},Se={class:"col-1"},we={class:"col-2"},Ce={class:"col-1"},Re={class:"col-1"},Ue={class:"col-1"},$e={class:"col-1"},Ne={class:"col-1"},_e={class:"col-1"},Me={class:"col-1"},Be={class:"col-1"},xe={class:"col-1"},Pe={key:0,class:"card-footer"},De={class:"row"},ze=Object(s["g"])("div",{class:"col-1"},null,-1),Ee={class:"col-2"},Ae={class:"col-1"},Je={class:"col-1"},He={class:"col-1"},Le={class:"col-1"},Fe={class:"col-1"},Ge={class:"col-1"},Ve={class:"col-1"},We={class:"col-1"},qe={class:"col-1"};function Ke(t,e,n,o,a,i){var c=Object(s["z"])("router-link");return Object(s["u"])(),Object(s["f"])("div",null,[Object(s["g"])("div",{id:n.test.id},[Object(s["g"])("div",Lt,[Object(s["g"])("div",Ft,[Object(s["g"])("button",{type:"button",class:"btn btn-primary stop-test",onClick:e[0]||(e[0]=function(){return i.stop&&i.stop.apply(i,arguments)}),disabled:!a.running}," Stop ",8,Gt),Object(s["g"])("button",{type:"button",class:"btn btn-primary restart-test",onClick:e[1]||(e[1]=function(){return i.restart&&i.restart.apply(i,arguments)}),disabled:a.running}," Restart ",8,Vt),Object(s["g"])("button",{type:"button",class:"btn btn-primary download-test",onClick:e[2]||(e[2]=function(){return i.download&&i.download.apply(i,arguments)}),disabled:a.running}," Download ",8,Wt),Object(s["g"])("button",{type:"button",class:"btn btn-primary show-test-results",onClick:e[3]||(e[3]=function(){return i.showResults&&i.showResults.apply(i,arguments)}),disabled:!i.showResultsComp},Object(s["B"])(a.resultsText),9,qt),Object(s["g"])("button",{type:"button",class:"btn btn-danger delete-test",onClick:e[4]||(e[4]=function(){return i.deleteMe&&i.deleteMe.apply(i,arguments)})}," Delete ")]),a.showResultsBool?(Object(s["u"])(),Object(s["f"])("div",Kt,[Object(s["g"])("img",{class:"lin",src:a.linImageUrl},null,8,Yt),Object(s["g"])("img",{class:"reg",src:a.regImageUrl},null,8,Xt)])):Object(s["e"])("",!0),n.showPath?(Object(s["u"])(),Object(s["f"])("div",Qt,[Object(s["j"])(c,{to:{name:"Project",params:{id:n.pid}}},{default:Object(s["G"])((function(){return[Object(s["i"])(Object(s["B"])(n.pid),1)]})),_:1},8,["to"]),Zt,te,ee,Object(s["j"])(c,{to:{name:"Script",params:{pid:n.pid,id:n.sid}}},{default:Object(s["G"])((function(){return[Object(s["i"])(Object(s["B"])(n.sid),1)]})),_:1},8,["to"])])):Object(s["e"])("",!0),Object(s["g"])("div",{class:"card","data-mdb-toggle":"tooltip",title:a.tooltipText,onDblclick:e[5]||(e[5]=function(){return i.minimize&&i.minimize.apply(i,arguments)})},[Object(s["g"])("div",se,[Object(s["g"])("div",oe,[Object(s["g"])("div",{class:Object(s["p"])(["col-3 test-id",{green:a.running,red:!a.valid}])},[Object(s["g"])("label",ae,Object(s["B"])(n.test.id),1)],2),Object(s["g"])("div",ie,[ce,Object(s["i"])(" "+Object(s["B"])(a.info.users),1)]),Object(s["g"])("div",re,[le,Object(s["i"])(" "+Object(s["B"])(a.info.spawn_rate),1)]),Object(s["g"])("div",de,[ue,Object(s["i"])(" "+Object(s["B"])(a.info.workers),1)]),Object(s["g"])("div",fe,[be,Object(s["i"])(" "+Object(s["B"])(a.info.host),1)]),Object(s["g"])("div",me,[ge,Object(s["i"])(" "+Object(s["B"])(a.info.time),1)]),a.running?(Object(s["u"])(),Object(s["f"])("div",pe,[he,Object(s["g"])("label",Oe," "+Object(s["B"])(a.elapsed),1)])):Object(s["e"])("",!0),Object(s["g"])("div",je,[a.running?(Object(s["u"])(),Object(s["f"])("div",ve)):Object(s["e"])("",!0),i.showCheck?(Object(s["u"])(),Object(s["f"])("i",ke)):Object(s["e"])("",!0),i.showX?(Object(s["u"])(),Object(s["f"])("i",ye)):Object(s["e"])("",!0)])])]),Object(s["g"])("div",{class:"card-body",ref:"cardBody",style:Object(s["q"])(n.startMinimized?"display: none;":"display: block;")},[Ie,i.renderData?(Object(s["u"])(),Object(s["f"])("div",Te,[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["y"])(a.data.slice(0,-1),(function(t){return Object(s["u"])(),Object(s["f"])("div",{key:t,class:"row"},[Object(s["g"])("div",Se,Object(s["B"])(t["Type"]),1),Object(s["g"])("div",we,Object(s["B"])(t["Name"]),1),Object(s["g"])("div",Ce,Object(s["B"])(t["Request Count"]),1),Object(s["g"])("div",Re,Object(s["B"])(t["Failure Count"]),1),Object(s["g"])("div",Ue,Object(s["B"])(t["Median Response Time"]),1),Object(s["g"])("div",$e,Object(s["B"])(t["Average Response Time"].toString().slice(0,8)),1),Object(s["g"])("div",Ne,Object(s["B"])(t["Min Response Time"].toString().slice(0,8)),1),Object(s["g"])("div",_e,Object(s["B"])(t["Max Response Time"].toString().slice(0,8)),1),Object(s["g"])("div",Me,Object(s["B"])(t["Average Content Size"].toString().slice(0,8)),1),Object(s["g"])("div",Be,Object(s["B"])(t["Requests/s"].toString().slice(0,8)),1),Object(s["g"])("div",xe,Object(s["B"])(t["Failures/s"].toString().slice(0,8)),1)])})),128))])):Object(s["e"])("",!0)],4),i.renderData?(Object(s["u"])(),Object(s["f"])("div",Pe,[Object(s["g"])("div",De,[ze,Object(s["g"])("div",Ee,Object(s["B"])(a.data.at(-1)["Name"]),1),Object(s["g"])("div",Ae,Object(s["B"])(a.data.at(-1)["Request Count"]),1),Object(s["g"])("div",Je,Object(s["B"])(a.data.at(-1)["Failure Count"]),1),Object(s["g"])("div",He,Object(s["B"])(a.data.at(-1)["Median Response Time"]),1),Object(s["g"])("div",Le,Object(s["B"])(a.data.at(-1)["Average Response Time"].toString().slice(0,8)),1),Object(s["g"])("div",Fe,Object(s["B"])(a.data.at(-1)["Min Response Time"].toString().slice(0,8)),1),Object(s["g"])("div",Ge,Object(s["B"])(a.data.at(-1)["Max Response Time"].toString().slice(0,8)),1),Object(s["g"])("div",Ve,Object(s["B"])(a.data.at(-1)["Average Content Size"].toString().slice(0,8)),1),Object(s["g"])("div",We,Object(s["B"])(a.data.at(-1)["Requests/s"].toString().slice(0,8)),1),Object(s["g"])("div",qe,Object(s["B"])(a.data.at(-1)["Failures/s"].toString().slice(0,8)),1)])])):Object(s["e"])("",!0)],40,ne)])],8,Ht)])}n("3ca3"),n("ddb0"),n("2b3d"),n("9861");var Ye={name:"Test",props:["test","showPath","url","openfaasUrl","socket","pid","sid","startMinimized"],data:function(){return{info:JSON.parse(this.test.info),data:JSON.parse(this.test.data),running:!1,valid:JSON.parse(this.test.valid),socketIntv:null,elapsed:"",elapsedIntv:null,enoughData:!0,showResultsBool:!1,linImageUrl:"",regImageUrl:"",dataLoaded:!1,resultsText:"Show results",loadingImages:!1,minimized:!1,tooltipText:"Double click to minimize"}},computed:{showCheck:function(){return!this.running&&this.valid},showX:function(){return!this.running&&!this.valid},renderData:function(){return this.data.length>0},showResultsComp:function(){return this.enoughData&&!this.running&&!this.loadingImages}},methods:{minimize:function(){this.minimized?this.tooltipText="Double click to minimize":this.tooltipText="Double click to maximize",$(this.$refs.cardBody).slideToggle(),this.minimized=!this.minimized},stop:function(){var t=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:8,project_name:this.pid,script_name:this.sid,id:this.test.id})}).then((function(t){return t.json()})).then((function(e){e.success?(t.running=!1,clearInterval(t.socketIntv)):t.$root.showInfo("There was an error stopping the test","red")})).catch((function(){t.$root.showInfo("Could not connect to server","red")}))},restart:function(){this.$emit("restart",this.info,this.pid,this.sid)},deleteMe:function(){var t=this;this.$root.setUpConfirmation(this.test.id+": Are you sure you want to delete this test?","Delete",(function(){fetch(t.url,{method:"POST",body:JSON.stringify({command:9,project_name:t.pid,script_name:t.sid,id:t.test.id})}).then((function(t){return t.json()})).then((function(e){e.success?t.$emit("delete"):t.$root.showInfo("There was an error deleting the test","red")})).catch((function(){t.$root.showInfo("Could not connect to server","red")}))}))},download:function(){fetch(this.url,{method:"POST",body:JSON.stringify({command:11,project_name:this.pid,script_name:this.sid,id:this.test.id})}).then((function(t){return t.blob()})).then((function(t){var e=URL.createObjectURL(t);window.location.href=e}))},showResults:function(){var t=this;this.dataLoaded?(this.showResultsBool?this.resultsText="Show results":this.resultsText="Hide results",this.showResultsBool=!this.showResultsBool):(this.loadingImages=!0,fetch(this.url,{method:"POST",body:JSON.stringify({command:12,project_name:this.pid,script_name:this.sid,id:this.test.id,type:1})}).then((function(t){return t.json()})).then((function(e){e.success&&(0==e.status_code?fetch(t.url,{method:"POST",body:JSON.stringify({command:12,project_name:t.pid,script_name:t.sid,id:t.test.id,type:2})}).then((function(t){return t.blob()})).then((function(e){var n=window.URL||window.webkitURL;t.linImageUrl=n.createObjectURL(e),fetch(t.url,{method:"POST",body:JSON.stringify({command:12,project_name:t.pid,script_name:t.sid,id:t.test.id,type:3})}).then((function(t){return t.blob()})).then((function(e){var n=window.URL||window.webkitURL;t.regImageUrl=n.createObjectURL(e),t.resultsText="Hide results",t.showResultsBool=!0,t.dataLoaded=!0}))})):2==e.status_code&&(console.log("not enof"),t.$root.showInfo("Not enough data to analyse","red"),t.showResultsBool=!1,t.enoughData=!1)),t.loadingImages=!1})).catch((function(e){t.loadingImages=!1})))}},created:function(){this.minimized=this.startMinimized,this.minimized&&(this.tooltipText="Double click to maximize")},beforeUnmount:function(){this.socket.off(this.test.id),this.socketIntv&&clearInterval(this.socketIntv),this.elapsedIntv&&clearInterval(this.elapsedIntv)},mounted:function(){var t=this;this.running=1===JSON.parse(this.test.status),this.running&&(this.elapsed=parseInt(Date.now()/1e3-this.info.started_at),this.elapsedIntv=setInterval((function(){t.elapsed=parseInt(Date.now()/1e3-t.info.started_at)}),1e3),this.socketIntv=setInterval((function(){t.socket.emit("stats",{project_name:t.pid,script_name:t.sid,id:t.test.id,openfaasurl:t.openfaasUrl})}),2e3),this.socket.on(this.test.id,(function(e){var n=JSON.parse(e.data);if(n.success){if(0==n.status)return clearInterval(t.socketIntv),clearInterval(t.elapsedIntv),void(t.running=!1);t.data=JSON.parse(n.data)}else 4==n.exit_code&&(t.$root.showInfo(t.test.id+" There was an error running your locust file","red"),clearInterval(t.socketIntv),clearInterval(t.elapsedIntv),t.running=!1,t.valid=!1)})))}};const Xe=bt()(Ye,[["render",Ke]]);var Qe=Xe,Ze=["id"],tn={class:"card-body"},en={class:"row"},nn={class:"col-10 project_name","data-mdb-toggle":"tooltip",title:"Project name"},sn=Object(s["g"])("div",{class:"col-1"},[Object(s["g"])("div",{class:"spinner-border text-primary spinner","data-mdb-toggle":"tooltip",title:"Running"})],-1),on={class:"col-1","data-mdb-toggle":"tooltip",title:"Cancel"};function an(t,e,n,o,a,i){return Object(s["u"])(),Object(s["f"])("div",{class:"card project-card",id:n.id},[Object(s["g"])("div",tn,[Object(s["g"])("div",en,[Object(s["g"])("div",nn,Object(s["B"])(n.id),1),sn,Object(s["g"])("div",on,[Object(s["g"])("i",{class:"fas fa-times stop-install-project",onClick:e[0]||(e[0]=function(){return i.stop&&i.stop.apply(i,arguments)})})])])])],8,Ze)}var cn={name:"InstallationProcess",props:["id","url","openfaasUrl","socket"],data:function(){return{socketIntv:null}},methods:{stop:function(){var t=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:15,project_name:this.id})}).then((function(t){return t.json()})).then((function(e){e.success?(t.$root.showInfo(t.id+": installation canceled successfully","green"),t.$emit("delete")):t.$root.showInfo("There was an error canceling the installation","red")})).catch((function(){t.$root.showInfo("Could not connect to server","red")}))}},beforeUnmount:function(){this.socketIntv&&clearInterval(this.socketIntv)},mounted:function(){var t=this;this.socketIntv=setInterval((function(){t.socket.emit("task_stats",{project_name:t.id,openfaasurl:t.openfaasUrl})}),1e3),this.socket.on(this.id,(function(e){var n=JSON.parse(e.data);n.success?3===n.status_code?console.log("thread is locking"):2===n.status_code?console.log("installing project"):1===n.status_code?(console.log("installing failed"),clearInterval(t.socketIntv),t.$root.showInfo("Installation failed","red",n.error),t.$emit("delete")):(console.log("Task is finished"),clearInterval(t.socketIntv),t.$emit("delete"),t.$root.showInfo("Installation successs","green")):(console.log("Something went wrong"),t.$root.showInfo("Something went wrong","red"),clearInterval(t.socketIntv))}))}};const rn=bt()(cn,[["render",an]]);var ln=rn,dn={name:"Control",components:{Test:Qe,InstallationProcess:ln},props:["url","openfaasUrl","socket","minimizeTests","update"],data:function(){return{tests:[],projects:[]}},methods:{init:function(){var t=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:13})}).then((function(t){return t.json()})).then((function(e){e.success&&(t.tests=e.tests)})).catch((function(){t.$emit("info","Could not connect to server","red")})),fetch(this.url,{method:"POST",body:JSON.stringify({command:1})}).then((function(t){return t.json()})).then((function(e){e.success&&(t.projects=e.projects,console.log(e.projects),console.log(t.projects))})).catch((function(){t.$emit("info","Could not connect to server","red")}))},killRunningTasks:function(){var t=this;this.$root.setUpConfirmation("Kill all running tasks? Istallation tasks will also be killed","Kill",(function(){fetch(t.url,{method:"POST",body:JSON.stringify({command:911})}).then((function(t){return t.json()})).then((function(e){e.success?t.$emit("info","Success","green"):t.$emit("info","There was an error killing running tasks","red")})).catch((function(){t.$emit("info","Could not connect to server","red")}))}))},deleteAllProjects:function(){var t=this;this.$root.setUpConfirmation("Delete all projects?","Delete",(function(){fetch(t.url,{method:"POST",body:JSON.stringify({command:912})}).then((function(t){return t.json()})).then((function(e){e.success?t.$emit("info","Success","green"):t.$emit("info","There was an error deleting projects","red")})).catch((function(){t.$emit("info","Could not connect to server","red")}))}))},restart:function(t,e,n){this.start(t.users,t.spawn_rate,t.workers,t.host,t.time,e,n)},start:function(t,e,n,s,o,a,i){var c=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:5,project_name:a,script_name:i,users:parseInt(t),spawn_rate:parseInt(e),workers:parseInt(n),host:s,time:parseInt(o)})}).then((function(t){return t.json()})).then((function(r){if(r.success){var l=r.id,d=r.started_at,u=JSON.stringify({users:t,spawn_rate:e,host:s,workers:n,time:o,started_at:d}),f=1,b=!0,m={id:l,info:u,status:f,valid:b,data:JSON.stringify([])},g={id:l,info:m,project_name:a,script_name:i};console.log(g),c.tests.push(g)}})).catch((function(){c.$emit("info","Could not connect to server","red")}))},deleteTest:function(t){this.tests=this.tests.filter((function(e){return e!==t}))},deleteProject:function(t){this.projects=this.projects.filter((function(e){return e!==t}))}},mounted:function(){this.init()},updated:function(){this.update&&(this.init(),this.$root.updated())}};const un=bt()(dn,[["render",Jt]]);var fn=un,bn={class:"card license"},mn=Object(s["g"])("div",{class:"card-body"},[Object(s["g"])("h5",{class:"card-title"},"MIT License"),Object(s["g"])("p",{class:"card-text"},[Object(s["i"])(" Copyright (c) 2021 Jad K. Haddad"),Object(s["g"])("br"),Object(s["g"])("br"),Object(s["i"])(' Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:'),Object(s["g"])("br"),Object(s["g"])("br"),Object(s["i"])(" The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software."),Object(s["g"])("br"),Object(s["g"])("br"),Object(s["i"])(' THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. ')])],-1),gn=[mn];function pn(t,e,n,o,a,i){return Object(s["u"])(),Object(s["f"])("div",bn,gn)}var hn={name:"License"};const On=bt()(hn,[["render",pn]]);var jn=On;function vn(t,e,n,o,a,i){return Object(s["u"])(),Object(s["f"])("h1",null,"OpenFaas")}var kn={name:"Openfaas"};const yn=bt()(kn,[["render",vn]]);var In=yn,Tn={class:"list-group"},Sn=["id"],wn={class:"test-label"};function Cn(t,e,n,o,a,i){var c=Object(s["z"])("router-link");return Object(s["u"])(),Object(s["f"])("div",null,[Object(s["g"])("h3",null,Object(s["B"])(a.id),1),Object(s["g"])("div",Tn,[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["y"])(a.scripts,(function(t){return Object(s["u"])(),Object(s["f"])("a",{key:t,id:t,class:"list-group-item list-group-item-action"},[Object(s["j"])(c,{to:{name:"Script",params:{pid:a.id,id:t}}},{default:Object(s["G"])((function(){return[Object(s["g"])("label",wn,Object(s["B"])(t),1)]})),_:2},1032,["to"])],8,Sn)})),128))])])}var Rn={name:"Project",props:["url","openfaasUrl","socket","update"],data:function(){return{id:this.$route.params.id,scripts:[]}},methods:{init:function(){var t=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:4,project_name:this.id})}).then((function(t){return t.json()})).then((function(e){e.success&&(t.scripts=e.locust_scripts)})).catch((function(){t.$emit("info","Could not connect to server","red")}))}},mounted:function(){this.init()},updated:function(){this.update&&(this.init(),this.$root.updated())}};const Un=bt()(Rn,[["render",Cn]]);var $n=Un,Nn={class:"btn-container"},_n=Object(s["g"])("button",{type:"button",class:"btn btn-primary","data-mdb-toggle":"modal","data-mdb-target":"#Modal"}," Start ",-1),Mn={class:"modal fade",id:"Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true"},Bn={class:"modal-dialog"},xn={class:"modal-content"},Pn=Object(s["g"])("div",{class:"modal-header"},[Object(s["g"])("h5",{class:"modal-title",id:"ModalLabel"},"Start"),Object(s["g"])("button",{type:"button",class:"btn-close","data-mdb-dismiss":"modal","aria-label":"Close"})],-1),Dn={class:"modal-body"},zn={class:"form-outline mb-4"},En=Object(s["g"])("label",{class:"form-label",for:"users-input"},"Users",-1),An={class:"form-outline mb-4"},Jn=Object(s["g"])("label",{class:"form-label",for:"spawn-rate-input"},"Spawn rate",-1),Hn={class:"form-outline mb-4"},Ln=Object(s["g"])("label",{class:"form-label",for:"workers-input"},"Workers",-1),Fn=Object(s["g"])("div",{class:"form-text",style:{"padding-bottom":"10px"}}," This will overwrite all hosts in your file ",-1),Gn={class:"form-outline mb-4"},Vn=Object(s["g"])("label",{class:"form-label",for:"host-input"},"Host",-1),Wn=Object(s["g"])("div",{class:"form-text",style:{"padding-bottom":"10px"}}," If time is not set, the test will not stop automatically ",-1),qn={class:"form-outline mb-4"},Kn=Object(s["g"])("label",{class:"form-label",for:"time-input"},"Time in seconds",-1),Yn={type:"button",class:"btn btn-primary hidden","data-mdb-dismiss":"modal",id:"dismiss-btn",ref:"dismiss"};function Xn(t,e,n,o,a,i){var c=Object(s["z"])("Test");return Object(s["u"])(),Object(s["f"])("div",null,[Object(s["g"])("h3",null,Object(s["B"])(a.id),1),Object(s["g"])("div",Nn,[_n,Object(s["g"])("button",{type:"button",class:"btn btn-danger",id:"delete-script-tests",onClick:e[0]||(e[0]=function(){return i.deleteAll&&i.deleteAll.apply(i,arguments)})}," Delete all ")]),(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["y"])(a.tests,(function(t){return Object(s["u"])(),Object(s["d"])(c,{key:t,test:t,showPath:!1,url:n.url,openfaasUrl:n.openfaasUrl,socket:n.socket,pid:a.pid,sid:a.id,startMinimized:n.minimizeTests,onRestart:i.restart,onDelete:function(e){return i.deleteTest(t)}},null,8,["test","url","openfaasUrl","socket","pid","sid","startMinimized","onRestart","onDelete"])})),128)),Object(s["g"])("div",Mn,[Object(s["g"])("div",Bn,[Object(s["g"])("div",xn,[Pn,Object(s["g"])("div",Dn,[Object(s["g"])("form",null,[Object(s["g"])("div",zn,[Object(s["H"])(Object(s["g"])("input",{type:"text",id:"users-input",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.users=t})},null,512),[[s["E"],a.users]]),En]),Object(s["g"])("div",An,[Object(s["H"])(Object(s["g"])("input",{type:"text",id:"spawn-rate-input",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=function(t){return a.spawnRate=t})},null,512),[[s["E"],a.spawnRate]]),Jn]),Object(s["g"])("div",Hn,[Object(s["H"])(Object(s["g"])("input",{type:"text",id:"workers-input",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=function(t){return a.workers=t})},null,512),[[s["E"],a.workers]]),Ln]),Fn,Object(s["g"])("div",Gn,[Object(s["H"])(Object(s["g"])("input",{type:"text",id:"host-input",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=function(t){return a.host=t})},null,512),[[s["E"],a.host]]),Vn]),Wn,Object(s["g"])("div",qn,[Object(s["H"])(Object(s["g"])("input",{type:"text",id:"time-input",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=function(t){return a.time=t})},null,512),[[s["E"],a.time]]),Kn]),Object(s["g"])("button",{type:"button",class:"btn btn-primary btn-block",id:"start-btn",onClick:e[6]||(e[6]=function(){return i.startFromModal&&i.startFromModal.apply(i,arguments)})}," Start ")]),Object(s["g"])("button",Yn,null,512)])])])])])}var Qn={name:"Script",components:{Test:Qe},props:["url","openfaasUrl","socket","minimizeTests","update"],data:function(){return{id:this.$route.params.id,pid:this.$route.params.pid,tests:[],users:"",spawnRate:"",workers:"",host:"",time:""}},methods:{init:function(){var t=this;this.host=localStorage.getItem("last_host"),document.querySelectorAll(".form-outline").forEach((function(t){new mdb.Input(t).init()})),fetch(this.url,{method:"POST",body:JSON.stringify({command:7,project_name:this.pid,script_name:this.id})}).then((function(t){return t.json()})).then((function(e){e.success&&(t.tests=e.tests,console.log(t.tests[0]))})).catch((function(){t.$emit("info","Could not connect to server","red")}))},deleteAll:function(){var t=this;this.$root.setUpConfirmation(this.id+": Are you sure you want to delete all tests?","Delete",(function(){fetch(t.url,{method:"POST",body:JSON.stringify({command:16,project_name:t.pid,script_name:t.id})}).then((function(t){return t.json()})).then((function(e){e.success?(t.tests=[],t.$emit("info","Success","green")):t.$emit("info","There was an error deleting tests","red")})).catch((function(){this.$emit("info","Could not connect to server","red")}))}))},start:function(t,e,n,s,o){var a=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:5,project_name:this.pid,script_name:this.id,users:parseInt(t),spawn_rate:parseInt(e),workers:parseInt(n),host:s,time:parseInt(o)})}).then((function(t){return t.json()})).then((function(i){if(i.success){var c=i.id,r=i.started_at,l=JSON.stringify({users:t,spawn_rate:e,host:s,workers:n,time:o,started_at:r}),d=1,u=!0,f={id:c,info:l,status:d,valid:u,data:JSON.stringify([])};console.log(f),a.tests.push(f)}})).catch((function(){a.$emit("info","Could not connect to server","red")}))},startFromModal:function(){return this.host=this.host.replace("http://","").replace("https://",""),""!=this.host&&(this.host="http://"+this.host),""===this.users?(this.$emit("info","Users cant be empty","red"),!1):isInteger(this.users)?""===this.spawnRate?(this.$emit("info","Spawn rate cant be empty","red"),!1):isInteger(this.spawnRate)?""===this.workers||isInteger(this.workers)?""==this.time||isInteger(this.time)?(this.$refs.dismiss.click(),""!=this.host&&localStorage.setItem("last_host",this.host),void this.start(this.users,this.spawnRate,this.workers,this.host,this.time)):(this.$emit("info","Time must be an integer","red"),!1):(this.$emit("info","workers must be an integer","red"),!1):(this.$emit("info","Spawn rate must be an integer","red"),!1):(this.$emit("info","Users must be an integer","red"),!1)},restart:function(t){this.start(t.users,t.spawn_rate,t.workers,t.host,t.time)},deleteTest:function(t){this.tests=this.tests.filter((function(e){return e!==t}))}},mounted:function(){this.init()},updated:function(){this.update&&(this.init(),this.$root.updated())}};const Zn=bt()(Qn,[["render",Xn]]);var ts=Zn,es={class:"egg"},ns=Object(s["g"])("i",{class:"fas fa-egg fa-10x",id:"egg"},null,-1),ss=[ns];function os(t,e,n,o,a,i){return Object(s["u"])(),Object(s["f"])("div",es,ss)}var as={mounted:function(){var t=0;$("#egg").on("mousedown",(function(){t>50||(t>42?$(this).toggleClass("fas far").toggleClass("fa-egg fa-dizzy"):t>39?$(this).toggleClass("fas far").toggleClass("fa-egg fa-angry"):t>36?$(this).toggleClass("fas far").toggleClass("fa-egg fa-frown-open"):t>33?$(this).toggleClass("fas far").toggleClass("fa-egg fa-frown"):t>29?$(this).toggleClass("fas far").toggleClass("fa-egg fa-flushed"):t>26?$(this).toggleClass("fas far").toggleClass("fa-egg fa-meh-blank"):t>23?$(this).toggleClass("fas far").toggleClass("fa-egg fa-meh"):t>20?$(this).toggleClass("fas far").toggleClass("fa-egg fa-grin-beam-sweat"):t>13?$(this).toggleClass("fas far").toggleClass("fa-egg fa-grin-beam"):t>10?$(this).toggleClass("fas far").toggleClass("fa-egg fa-grin"):t>5?$(this).toggleClass("fas far").toggleClass("fa-egg fa-smile"):$(this).toggleClass("fas far").toggleClass("fa-egg fa-smile-wink"),t+=1)})).on("mouseup",(function(){t>=50||($(this).removeClass("fa-smile-wink").removeClass("fa-smile").removeClass("fa-grin"),$(this).removeClass("fa-grin-beam").removeClass("fa-grin-beam-sweat").removeClass("fa-meh"),$(this).removeClass("fa-meh-blank").removeClass("fa-flushed").removeClass("fa-frown"),$(this).removeClass("fa-frown-open").removeClass("fa-angry").removeClass("fa-dizzy"),$(this).toggleClass("far fas"),$(this).addClass("fa-egg"))}))}};const is=bt()(as,[["render",os]]);var cs=is;function rs(t,e,n,o,a,i){return Object(s["u"])(),Object(s["f"])("h1",null,"404 | Not Found")}var ls={};const ds=bt()(ls,[["render",rs]]);var us=ds,fs=[{path:"/",name:"Home",component:Et},{path:"/control",name:"Control",component:fn},{path:"/openfaas",name:"Openfaas",component:In},{path:"/license",name:"License",component:jn},{path:"/project/:id",name:"Project",component:$n,props:!0},{path:"/project/:pid/:id",name:"Script",component:ts,props:!0},{path:"/egg",name:"Egg",component:cs},{path:"/:catchAll(.*)",name:"NotFound",component:us}],bs=Object(jt["a"])({history:Object(jt["b"])("/"),routes:fs}),ms=bs;Object(s["c"])(Ot).use(ms).mount("#app")}});
//# sourceMappingURL=app.58ce29e5.js.map