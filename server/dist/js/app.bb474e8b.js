(function(t){function e(e){for(var n,a,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&h.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,r=1;r<s.length;r++){var c=s[r];0!==o[c]&&(n=!1)}n&&(i.splice(e--,1),t=a(a.s=s[0]))}return t}var n={},o={app:0},i=[];function a(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=n,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(s,n,function(e){return t[e]}.bind(null,n));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("7a23"),o={type:"button",class:"btn btn-primary hidden","data-mdb-toggle":"modal","data-mdb-target":"#Info-Modal",id:"info-modal-button",ref:"infoModalButton"},i={class:"modal fade",id:"Info-Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true",ref:"infoModal"},a={class:"modal-dialog"},r={class:"modal-content"},c={class:"modal-body info-message-container"},l={key:0},d={id:"info-error"},u={type:"button",class:"btn btn-primary hidden","data-mdb-toggle":"modal","data-mdb-target":"#Confirmation-Modal",id:"confirmation-modal-button",ref:"confirmationModalButton"},h={class:"modal fade",id:"Confirmation-Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true"},f={class:"modal-dialog"},p={class:"modal-content"},b={class:"modal-body"},m=Object(n["h"])("h3",{id:"confirm-message"},null,-1),O={class:"modal-footer"},j=Object(n["h"])("div",{class:"background-dark"},null,-1);function g(t,e,s,g,v,k){var y=Object(n["A"])("NavBar"),T=Object(n["A"])("router-view"),S=Object(n["A"])("Footer");return Object(n["v"])(),Object(n["g"])("div",{class:Object(n["q"])({nr:v.noRedges,dark:v.darkTheme})},[Object(n["k"])(y,{runningTests:v.runningTests,openfaasUrl:v.openfaasUrl,direct:v.direct,noOpenfaas:v.noOpenfaas,functionName:v.functionName,minimizeTests:v.minimizeTests,darkTheme:v.darkTheme,noRedges:v.noRedges,onDefault:k.setDefaults,onSettings:k.updateSettings},null,8,["runningTests","openfaasUrl","direct","noOpenfaas","functionName","minimizeTests","darkTheme","noRedges","onDefault","onSettings"]),Object(n["k"])(T,{url:v.url,openfaasUrl:v.openfaasUrl,socket:v.socket,minimizeTests:v.minimizeTests,update:v.update,onInfo:k.showInfo},null,8,["url","openfaasUrl","socket","minimizeTests","update","onInfo"]),Object(n["h"])("div",null,[Object(n["h"])("button",o,null,512)]),Object(n["h"])("div",i,[Object(n["h"])("div",a,[Object(n["h"])("div",r,[Object(n["h"])("div",c,[Object(n["h"])("div",null,[Object(n["h"])("label",{id:"info-message",class:Object(n["q"])({green:"green"===v.infoColor,red:"red"===v.infoColor})},Object(n["C"])(v.infoMessage),3)]),v.infoError?(Object(n["v"])(),Object(n["g"])("div",l,[Object(n["h"])("label",d,Object(n["C"])(v.infoErrorText),1)])):Object(n["f"])("",!0)])])])],512),Object(n["h"])("div",null,[Object(n["h"])("button",u,null,512)]),Object(n["h"])("div",h,[Object(n["h"])("div",f,[Object(n["h"])("div",p,[Object(n["h"])("div",b,[m,Object(n["j"])(" "+Object(n["C"])(v.confirmMessage),1)]),Object(n["h"])("div",O,[Object(n["h"])("button",{type:"button",class:"btn btn-danger","data-mdb-dismiss":"modal",ref:"confirmBtn"},Object(n["C"])(v.confirmButtonText),513)])])])]),v.darkTheme?(Object(n["v"])(),Object(n["e"])(n["b"],{key:0,to:"#teleported"},[j])):Object(n["f"])("",!0),(Object(n["v"])(),Object(n["e"])(n["b"],{to:"#teleported-footer"},[Object(n["k"])(S,{class:Object(n["q"])({dark:v.darkTheme,"bg-light":!v.darkTheme})},null,8,["class"])]))],2)}s("d3b7"),s("fb6a"),s("159b");var v={class:"navbar navbar-expand-lg navbar-light bg-white fixed-top"},k={class:"container-fluid"},y=Object(n["h"])("button",{class:"navbar-toggler",type:"button","data-mdb-toggle":"collapse","data-mdb-target":"#navbarTop","aria-controls":"navbarTop","aria-expanded":"false","aria-label":"Toggle navigation"},[Object(n["h"])("i",{class:"fas fa-bars"})],-1),T={class:"collapse navbar-collapse",id:"navbarTop"},S={class:"navbar-nav me-auto mb-2 mb-lg-0"},I={class:"nav-item active"},w=Object(n["j"])("Home"),_={class:"nav-item active"},C=Object(n["j"])("Control"),U={class:"nav-item"},N=Object(n["j"])("License"),R=Object(n["h"])("li",{class:"nav-item"},[Object(n["h"])("a",{class:"nav-link","aria-current":"page",href:"https://github.com/JadKHaddad/Openfaas-Performance-Testing-as-a-Service"},"Source")],-1),x={class:"nav-item"},P=Object(n["j"])("OpenFaaS"),M={class:"nav-item"},D=Object(n["h"])("i",{class:"fas fa-cog",id:"gear"},null,-1),z={id:"url",style:{"font-weight":"bold"}},A={class:"modal fade",id:"Url-Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true"},E={class:"modal-dialog"},J={class:"modal-content"},F={class:"modal-body"},L={class:"form-outline mb-4"},H=["disabled"],B=Object(n["h"])("label",{class:"form-label",for:"url-input"},"OpenFaaS url",-1),V={class:"form-check","data-mdb-toggle":"tooltip",title:"Can the brwoser connect to OpenFaas directly?"},W=["disabled"],q=Object(n["h"])("label",{class:"form-check-label",for:"direct-checkbox"}," Direct connection ",-1),G={class:"form-check","data-mdb-toggle":"tooltip",title:"No OpenFaaS-Server is being used"},K=Object(n["h"])("label",{class:"form-check-label",for:"no-openfaas-checkbox"}," No OpenFaaS ",-1),Y={class:"form-check"},X=Object(n["h"])("label",{class:"form-check-label",for:"dark-theme-checkbox"}," Dark theme ",-1),Q={class:"form-check"},Z=Object(n["h"])("label",{class:"form-check-label",for:"i-do-not-like-rounded-edges-checkbox"}," I don't like rounded edges ",-1),tt={class:"form-check","data-mdb-toggle":"tooltip",title:"Tests will be minimized by default"},et=Object(n["h"])("label",{class:"form-check-label",for:"minimized"}," Minimize tests ",-1),st={key:0,id:"url-message"},nt={class:"modal-footer"},ot={key:0,class:"spinner-border text-primary spinner",id:"url-spinner"},it=["disabled"],at=["disabled"],rt={type:"button",class:"btn btn-primary hidden","data-mdb-dismiss":"modal",id:"dismiss-url-modal-btn",ref:"dismissBtn"},ct=Object(n["h"])("div",null,[Object(n["h"])("button",{type:"button",class:"btn btn-primary hidden","data-mdb-toggle":"modal","data-mdb-target":"#Url-Modal",id:"url-modal-button"})],-1),lt={id:"server-stats"},dt=Object(n["j"])(" Running tests: "),ut={id:"running-tests-label"};function ht(t,e,s,o,i,a){var r=Object(n["A"])("router-link");return Object(n["v"])(),Object(n["g"])("div",null,[Object(n["h"])("header",null,[Object(n["h"])("nav",v,[Object(n["h"])("div",k,[y,Object(n["h"])("div",T,[Object(n["h"])("ul",S,[Object(n["h"])("li",I,[Object(n["k"])(r,{to:"/",class:"nav-link","aria-current":"page"},{default:Object(n["H"])((function(){return[w]})),_:1})]),Object(n["h"])("li",_,[Object(n["k"])(r,{to:"/control",class:"nav-link","aria-current":"page"},{default:Object(n["H"])((function(){return[C]})),_:1})]),Object(n["h"])("li",U,[Object(n["k"])(r,{to:"/license",class:"nav-link","aria-current":"page"},{default:Object(n["H"])((function(){return[N]})),_:1})]),R,Object(n["h"])("li",x,[Object(n["k"])(r,{to:"/openfaas",class:"nav-link","aria-current":"page"},{default:Object(n["H"])((function(){return[P]})),_:1})]),Object(n["h"])("li",M,[Object(n["h"])("a",{onClick:e[0]||(e[0]=function(){return a.setUp&&a.setUp.apply(a,arguments)}),class:"nav-link","aria-current":"page",id:"nav-url",href:"#","data-mdb-toggle":"modal","data-mdb-target":"#Url-Modal"},[D,Object(n["h"])("label",z,"  "+Object(n["C"])(s.openfaasUrl),1)])])])])])])]),Object(n["h"])("div",A,[Object(n["h"])("div",E,[Object(n["h"])("div",J,[Object(n["h"])("div",F,[Object(n["h"])("form",null,[Object(n["h"])("div",L,[Object(n["I"])(Object(n["h"])("input",{type:"text",id:"url-input",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.tempOpenfaasUrl=t}),disabled:i.tempNoOpenfaas},null,8,H),[[n["F"],i.tempOpenfaasUrl]]),B]),Object(n["h"])("div",V,[Object(n["I"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"direct-checkbox","onUpdate:modelValue":e[2]||(e[2]=function(t){return i.tempDirect=t}),disabled:i.tempNoOpenfaas},null,8,W),[[n["E"],i.tempDirect]]),q]),Object(n["h"])("div",G,[Object(n["I"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"no-openfaas-checkbox","onUpdate:modelValue":e[3]||(e[3]=function(t){return i.tempNoOpenfaas=t})},null,512),[[n["E"],i.tempNoOpenfaas]]),K]),Object(n["h"])("div",Y,[Object(n["I"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"dark-theme-checkbox","onUpdate:modelValue":e[4]||(e[4]=function(t){return i.tempDarkTheme=t})},null,512),[[n["E"],i.tempDarkTheme]]),X]),Object(n["h"])("div",Q,[Object(n["I"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"i-do-not-like-rounded-edges-checkbox","onUpdate:modelValue":e[5]||(e[5]=function(t){return i.tempNoRedges=t})},null,512),[[n["E"],i.tempNoRedges]]),Z]),Object(n["h"])("div",tt,[Object(n["I"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"minimized","onUpdate:modelValue":e[6]||(e[6]=function(t){return i.tempMinimizeTests=t})},null,512),[[n["E"],i.tempMinimizeTests]]),et]),Object(n["h"])("div",null,[i.error?(Object(n["v"])(),Object(n["g"])("label",st,"Could not connect to openfaas")):Object(n["f"])("",!0)])])]),Object(n["h"])("div",nt,[i.loading?(Object(n["v"])(),Object(n["g"])("div",ot)):Object(n["f"])("",!0),Object(n["h"])("button",{type:"button",class:"btn btn-danger",id:"restore-defaults-btn",onClick:e[7]||(e[7]=function(){return a.restoreDefault&&a.restoreDefault.apply(a,arguments)}),disabled:i.loading}," Restore defaults ",8,it),Object(n["h"])("button",{type:"button",class:"btn btn-primary",id:"set-url-btn",onClick:e[8]||(e[8]=function(){return a.ok&&a.ok.apply(a,arguments)}),disabled:i.loading}," Ok ",8,at)]),Object(n["h"])("button",rt,null,512)])])]),ct,Object(n["h"])("div",lt,[dt,Object(n["h"])("label",ut,Object(n["C"])(s.runningTests),1)])])}s("ac1f"),s("5319"),s("e9c4");var ft={name:"NavBar",props:["runningTests","openfaasUrl","direct","noOpenfaas","functionName","minimizeTests","darkTheme","noRedges"],data:function(){return{tempOpenfaasUrl:"None",tempDirect:null,tempNoOpenfaas:null,tempDarkTheme:null,tempNoRedges:null,tempMinimizeTests:null,loading:!1,error:!1}},methods:{setUp:function(){this.noOpenfaas||(this.tempOpenfaasUrl=this.openfaasUrl),this.tempDirect=this.direct,this.tempNoOpenfaas=this.noOpenfaas,this.tempDarkTheme=this.darkTheme,this.tempNoRedges=this.noRedges,this.tempMinimizeTests=this.minimizeTests,this.error=!1},restoreDefault:function(){var t=this;this.loading=!0,this.error=!1,fetch("/defaults",{method:"POST"}).then((function(t){return t.json()})).then((function(e){if(e.openfaas_url){t.tempNoOpenfaas=!1;var s=e.openfaas_url;"/"==s.slice(-1)&&(s=s.slice(0,-1));var n="".concat(s,"/function/ptas");e.direct||(n="/proxy")}else s="None",n="/local",t.tempNoOpenfaas=!0;t.tempDirect=e.direct,t.loading=!1;var o={baseUrl:n,openfaasUrl:s,direct:t.tempDirect,noOpenfaas:t.tempNoOpenfaas};t.$refs.dismissBtn.click(),t.$emit("default",o)})).catch((function(){t.$refs.dismissBtn.click(),t.loading=!1,t.error=!0}))},ok:function(){var t=this,e=function(e,s){var n={baseUrl:s,openfaasUrl:e,direct:t.tempDirect,noOpenfaas:t.tempNoOpenfaas,darkTheme:t.tempDarkTheme,noRedges:t.tempNoRedges,minimizeTests:t.tempMinimizeTests};t.loading=!1,t.error=!1,t.$refs.dismissBtn.click(),t.$emit("settings",n)};if(this.tempNoOpenfaas)e("None","/local");else{var s=this.tempOpenfaasUrl;s=s.replace("http://","").replace("https://",""),s="http://"+s,this.loading=!0,this.error=!1,fetch("/check_connection",{method:"POST",body:JSON.stringify({url:s})}).then((function(t){return t.json()})).then((function(n){if(n.success){"/"==s.slice(-1)&&(s=s.slice(0,-1));var o="".concat(s,"/function/ptas");t.tempDirect||(o="/proxy"),e(s,o)}else t.loading=!1,t.error=!0})).catch((function(){t.loading=!1,t.$root.showInfo("Could not connect to server","red")}))}}},created:function(){this.setUp()},mounted:function(){$.fn.animateRotate=function(t,e,s,n){var o=$.speed(e,s,n),i=o.step;return this.each((function(e,s){o.complete=$.proxy(o.complete,s),o.step=function(t){if($.style(s,"transform","rotate("+t+"deg)"),i)return i.apply(s,arguments)},$({deg:0}).animate({deg:t},o)}))},$("#nav-url").on("click",(function(){return $("#gear").animateRotate(180),$("*").bind("click.myEvents",(function(t){t.currentTarget==$("#Url-Modal")[0]&&($("#gear").animateRotate(-180),$("*").off(".myEvents")),t.stopPropagation()})),!1}))}},pt=s("6b0d"),bt=s.n(pt);const mt=bt()(ft,[["render",ht]]);var Ot=mt,jt={class:"text-center text-white footer"},gt=Object(n["h"])("div",{class:"text-center p-3",style:{"background-color":"rgba(0, 0, 0, 0.2)"}},[Object(n["h"])("a",{class:"text-white",href:"https://www.uni-muenster.de/"},"Westfälische Wilhelms-Universität Münster"),Object(n["j"])("   |   "),Object(n["h"])("a",{class:"text-white",href:"https://www.gselectronic.com/"},"GS Electronic")],-1),vt=[gt];function kt(t,e,s,o,i,a){return Object(n["v"])(),Object(n["g"])("footer",jt,vt)}var yt={};const Tt=bt()(yt,[["render",kt]]);var St=Tt,It={name:"App",components:{NavBar:Ot,Footer:St},data:function(){return{openfaasUrl:"None",direct:!0,noOpenfaas:!0,functionName:"ptas",darkTheme:!1,noRedges:!1,minimizeTests:!1,update:!1,url:"/local",runningTests:0,socket:null,infoMessage:"info",infoColor:"green",infoError:!0,infoErrorText:"error",confirmMessage:"confirm",confirmButtonText:"confirm"}},methods:{disconnect:function(){this.socket.off(this.openfaasUrl),console.log("disconnected from: "+this.openfaasUrl)},register:function(){var t=this;this.socket.emit("register",{openfaasurl:this.openfaasUrl}),this.socket.on(this.openfaasUrl,(function(e){IsJsonString(e)&&(e=JSON.parse(e),e.success&&(t.runningTests=e.count))})),console.log("connected to: "+this.openfaasUrl)},configureConnections:function(){var t=this;this.socket=io(""),this.socket.on("connect",(function(){return t.register()})),console.log("current openfaasUrl: "+this.openfaasUrl),console.log("current baseUrl: "+this.url)},showInfo:function(t,e,s){this.infoMessage=t,this.infoColor=e,null!=s&&"None"!=s?(this.infoError=!0,this.infoErrorText=s):this.infoError=!1,$(this.$refs.infoModal).hasClass("show")||$(this.$refs.infoModalButton).click()},setUpConfirmation:function(t,e,s){this.confirmMessage=t,this.confirmButtonText=e,$(this.$refs.confirmBtn).off("click").on("click",s),$(this.$refs.confirmationModalButton).click()},updateSettings:function(t){this.disconnect(),this.url=t.baseUrl,this.openfaasUrl=t.openfaasUrl,this.direct=t.direct,this.noOpenfaas=t.noOpenfaas,this.darkTheme=t.darkTheme,this.noRedges=t.noRedges,this.minimizeTests=t.minimizeTests,localStorage.setItem("url",this.url),localStorage.setItem("openfaasUrl",this.openfaasUrl),localStorage.setItem("direct",this.direct),localStorage.setItem("noOpenfaas",this.noOpenfaas),localStorage.setItem("darkTheme",this.darkTheme),localStorage.setItem("noRedges",this.noRedges),localStorage.setItem("minimizeTests",this.minimizeTests),this.update=!0,this.register(),console.log("new openfaasUrl: "+this.openfaasUrl),console.log("new baseUrl: "+this.url)},updated:function(){this.update=!1},setDefaults:function(t){this.disconnect(),this.url=t.baseUrl,this.openfaasUrl=t.openfaasUrl,this.direct=t.direct,this.noOpenfaas=t.noOpenfaas,localStorage.setItem("url",this.url),localStorage.setItem("openfaasUrl",this.openfaasUrl),localStorage.setItem("direct",this.direct),localStorage.setItem("noOpenfaas",this.noOpenfaas),this.update=!0,this.register(),console.log("default openfaasUrl: "+this.openfaasUrl),console.log("default baseUrl: "+this.url)}},created:function(){var t=this;localStorage.getItem("url")&&(this.url=localStorage.getItem("url")),localStorage.getItem("openfaasUrl")&&(this.openfaasUrl=localStorage.getItem("openfaasUrl")),localStorage.getItem("direct")&&(this.direct=JSON.parse(localStorage.getItem("direct"))),localStorage.getItem("noOpenfaas")&&(this.noOpenfaas=JSON.parse(localStorage.getItem("noOpenfaas"))),localStorage.getItem("darkTheme")&&(this.darkTheme=JSON.parse(localStorage.getItem("darkTheme"))),localStorage.getItem("noRedges")&&(this.noRedges=JSON.parse(localStorage.getItem("noRedges"))),localStorage.getItem("minimizeTests")&&(this.minimizeTests=JSON.parse(localStorage.getItem("minimizeTests"))),localStorage.getItem("url")&&localStorage.getItem("openfaasUrl")&&localStorage.getItem("direct")||fetch("/defaults",{method:"POST"}).then((function(t){return t.json()})).then((function(e){if(e.openfaas_url){t.tempNoOpenfaas=!1;var s=e.openfaas_url;"/"==s.slice(-1)&&(s=s.slice(0,-1));var n="".concat(s,"/function/ptas");e.direct||(n="/proxy")}else s="None",n="/local",t.tempNoOpenfaas=!0;t.tempDirect=e.direct,t.loading=!1;var o={baseUrl:n,openfaasUrl:s,direct:t.tempDirect,noOpenfaas:t.tempNoOpenfaas};t.$refs.dismissBtn.click(),t.setDefaults(o)})).catch((function(){}))},mounted:function(){document.querySelectorAll(".form-outline").forEach((function(t){new mdb.Input(t).init()})),this.configureConnections()}};const wt=bt()(It,[["render",g]]);var _t=wt,Ct=s("6c02"),Ut={class:"btn-container"},$t=["disabled"],Nt=["disabled"],Rt={class:"list-group"},xt=["onClick"],Pt={class:"form-check"},Mt=["value","id"],Dt={class:"test-label"},zt={class:"modal fade",id:"Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true"},At={class:"modal-dialog"},Et={class:"modal-content"},Jt=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("h5",{class:"modal-title",id:"ModalLabel"},"Add a new Project")],-1),Ft={class:"modal-body"},Lt={class:"form-outline mb-4"},Ht={type:"file",webkitdirectory:"",mozdirectory:"",id:"project-input",ref:"files"},Bt={key:0,class:"btn-container"},Vt=Object(n["h"])("div",{class:"spinner-border text-primary spinner"},null,-1),Wt=[Vt],qt={type:"button",class:"btn btn-primary hidden","data-mdb-dismiss":"modal",id:"dismiss-btn",ref:"dismissBtn"},Gt={class:"btn-container"},Kt={key:0,class:"spinner-border text-primary spinner",id:"spinner"};function Yt(t,e,s,o,i,a){var r=Object(n["A"])("router-link");return Object(n["v"])(),Object(n["g"])("div",null,[Object(n["h"])("div",Ut,[Object(n["h"])("button",{type:"button",class:"btn btn-primary","data-mdb-toggle":"modal","data-mdb-target":"#Modal",id:"add-btn-Modal",disabled:i.loading}," Add a new project ",8,$t),Object(n["h"])("button",{type:"button",class:"btn btn-danger",id:"delete-project",disabled:!a.enableDelete,onClick:e[0]||(e[0]=function(){return a.deleteProjects&&a.deleteProjects.apply(a,arguments)})}," Delete ",8,Nt)]),Object(n["h"])("div",Rt,[(Object(n["v"])(!0),Object(n["g"])(n["a"],null,Object(n["z"])(i.projects,(function(t){return Object(n["v"])(),Object(n["g"])("a",{key:t,class:"list-group-item list-group-item-action",onClick:function(e){return a.navigateToProject(t)}},[Object(n["h"])("div",Pt,[Object(n["I"])(Object(n["h"])("input",{class:"form-check-input",type:"checkbox",value:t,"onUpdate:modelValue":e[1]||(e[1]=function(t){return i.markedProjects=t}),id:t,onClick:e[2]||(e[2]=Object(n["J"])((function(){return a.stopTheEvent&&a.stopTheEvent.apply(a,arguments)}),["stop"]))},null,8,Mt),[[n["E"],i.markedProjects]]),Object(n["k"])(r,{to:{name:"Project",params:{id:t}}},{default:Object(n["H"])((function(){return[Object(n["h"])("label",Dt,Object(n["C"])(t),1)]})),_:2},1032,["to"])])],8,xt)})),128))]),Object(n["h"])("div",zt,[Object(n["h"])("div",At,[Object(n["h"])("div",Et,[Jt,Object(n["h"])("div",Ft,[Object(n["h"])("form",null,[Object(n["h"])("div",Lt,[Object(n["h"])("input",Ht,null,512)]),i.uploading?(Object(n["v"])(),Object(n["g"])("div",Bt,Wt)):Object(n["f"])("",!0),i.uploading?Object(n["f"])("",!0):(Object(n["v"])(),Object(n["g"])("button",{key:1,type:"button",class:"btn btn-primary btn-block",id:"add-btn",onClick:e[3]||(e[3]=function(){return a.upload&&a.upload.apply(a,arguments)})}," Add "))]),Object(n["h"])("button",qt,null,512)])])])]),Object(n["h"])("div",Gt,[i.loading?(Object(n["v"])(),Object(n["g"])("div",Kt)):Object(n["f"])("",!0)])])}s("4de4"),s("caad"),s("2532");var Xt={name:"Home",props:["url","openfaasUrl","socket","update"],data:function(){return{projects:[],loading:!1,files:null,socketIntv:null,markedProjects:[],projectId:"",uploading:!1}},methods:{init:function(){var t=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:3})}).then((function(t){return t.json()})).then((function(e){e.success?t.projects=e.projects:t.$emit("info","Could not connect to server","red")})).catch((function(){t.$emit("info","Could not connect to server","red")})),this.socket.on(this.openfaasUrl+"_project_upload",(function(e){t.projects.push(e)})),this.socket.on(this.openfaasUrl+"_project_delete",(function(e){t.projects=t.projects.filter((function(t){return!e.includes(t)}))}))},upload:function(){var t=this,e=this.$refs.files.files;if(e.length<1)return this.$emit("info","Please select a directory to upload","red"),!1;for(var s=new FormData,n=0;n<e.length;n++)s.append("file"+n,e[n]);return this.uploading=!0,fetch(this.url,{method:"POST",body:s}).then((function(t){return t.json()})).then((function(e){t.uploading=!1,t.$refs.dismissBtn.click(),e.success?(t.loading=!0,t.projectId=e.task_id,t.socketIntv=setInterval((function(){t.socket.emit("task_stats",{project_name:t.projectId,openfaasurl:t.openfaasUrl})}),1e3),t.socket.on(t.projectId,(function(e){var s=JSON.parse(e.data);s.success?3===s.status_code||2===s.status_code||(1===s.status_code?(clearInterval(t.socketIntv),t.loading=!1,t.$emit("info","Installation failed","red",s.error)):(clearInterval(t.socketIntv),t.$router.push({name:"Project",params:{id:t.projectId}}),t.socket.emit("project_upload",{openfaasurl:t.openfaasUrl,project_name:t.projectId}))):(t.loading=!1,t.$emit("info","Something went wrong","red"),clearInterval(t.socketIntv))}))):(t.uploading=!1,t.loading=!1,t.$emit("info",e.message,"red"))})).catch((function(){t.$refs.dismissBtn.click(),t.uploading=!1,t.loading=!1,t.$emit("info","Something went wrong","red")})),!1},deleteProjects:function(){var t=this;this.$root.setUpConfirmation("Are you sure you want to delete these projects?","Delete",(function(){return fetch(t.url,{method:"POST",body:JSON.stringify({command:10,names:t.markedProjects})}).then((function(t){return t.json()})).then((function(){t.socket.emit("project_delete",{openfaasurl:t.openfaasUrl,project_names:t.markedProjects}),t.projects=t.projects.filter((function(e){return!t.markedProjects.includes(e)})),t.markedProjects=[]})).catch((function(){t.$emit("info","Could not connect to server","red")})),!1}))},navigateToProject:function(t){this.$router.push({name:"Project",params:{id:t}})},freeSocket:function(){this.socket.off(this.projectId),this.socket.off(this.openfaasUrl+"_project_upload"),this.socket.off(this.openfaasUrl+"_project_delete"),this.socketIntv&&clearInterval(this.socketIntv)},stopTheEvent:function(t){t.stopPropagation()}},computed:{enableDelete:function(){return this.markedProjects.length>0}},beforeUnmount:function(){this.freeSocket()},mounted:function(){this.init()},updated:function(){this.update&&(this.init(),this.freeSocket(),this.$root.updated())}};const Qt=bt()(Xt,[["render",Yt]]);var Zt=Qt,te={class:"control-btn-container"};function ee(t,e,s,o,i,a){var r=Object(n["A"])("InstallationProcess"),c=Object(n["A"])("Test");return Object(n["v"])(),Object(n["g"])("div",null,[Object(n["h"])("div",te,[Object(n["h"])("button",{type:"button",class:"btn btn-danger btn-block control-btn",id:"kill-btn",onClick:e[0]||(e[0]=function(){return a.killRunningTasks&&a.killRunningTasks.apply(a,arguments)})}," Kill running tasks "),Object(n["h"])("button",{type:"button",class:"btn btn-danger btn-block control-btn",id:"cleanup-btn",onClick:e[1]||(e[1]=function(){return a.deleteAllProjects&&a.deleteAllProjects.apply(a,arguments)})}," Delete all projects ")]),(Object(n["v"])(!0),Object(n["g"])(n["a"],null,Object(n["z"])(i.projects,(function(t){return Object(n["v"])(),Object(n["e"])(r,{key:t,id:t,url:s.url,openfaasUrl:s.openfaasUrl,socket:s.socket,onDelete:function(e){return a.deleteProject(t)}},null,8,["id","url","openfaasUrl","socket","onDelete"])})),128)),(Object(n["v"])(!0),Object(n["g"])(n["a"],null,Object(n["z"])(a.reversedTests,(function(t){return Object(n["v"])(),Object(n["e"])(c,{key:t[0],id:t[0],info:JSON.parse(t[1].info),data:JSON.parse(t[1].data),status:t[1].status,valid:t[1].valid,showPath:!0,url:s.url,openfaasUrl:s.openfaasUrl,pid:t[1].project_name,sid:t[1].script_name,startMinimized:s.minimizeTests,onRestart:a.restart,onDelete:a.deleteTest},null,8,["id","info","data","status","valid","url","openfaasUrl","pid","sid","startMinimized","onRestart","onDelete"])})),128))])}s("b64b"),s("4fad"),s("25f0"),s("33d1"),s("ea98");var se=["id"],ne={class:"test-container"},oe={class:"buttons btn-container"},ie=["disabled"],ae=["disabled"],re=["disabled"],ce=["disabled"],le={key:0,class:"img-container"},de=["src"],ue=["src"],he={key:1,class:"path"},fe=Object(n["j"])("    "),pe=Object(n["h"])("i",{class:"fas fa-angle-right"},null,-1),be=Object(n["j"])("    "),me=["title"],Oe={class:"card-header"},je={class:"row"},ge={"data-mdb-toggle":"tooltip",title:"Test id"},ve={class:"col-1","data-mdb-toggle":"tooltip",title:"Users"},ke=Object(n["h"])("i",{class:"fas fa-user-alt"},null,-1),ye={class:"col-1","data-mdb-toggle":"tooltip",title:"Spawn rate"},Te=Object(n["h"])("i",{class:"fas fa-users"},null,-1),Se={class:"col-1","data-mdb-toggle":"tooltip",title:"Workers"},Ie=Object(n["h"])("i",{class:"fas fa-hard-hat"},null,-1),we={class:"col-3","data-mdb-toggle":"tooltip",title:"Host"},_e=Object(n["h"])("i",{class:"fas fa-globe"},null,-1),Ce={class:"col-1","data-mdb-toggle":"tooltip",title:"Time is seconds"},Ue=Object(n["h"])("i",{class:"fas fa-clock"},null,-1),$e={key:0,class:"col-1 elapsed","data-mdb-toggle":"tooltip",title:"Elapsed time is seconds"},Ne=Object(n["h"])("i",{class:"fas fa-stopwatch"},null,-1),Re={class:"elapsed-text"},xe={class:"col-1"},Pe={key:0,class:"spinner-border text-primary spinner","data-mdb-toggle":"tooltip",title:"Running"},Me={key:1,class:"fas fa-check check"},De={key:2,class:"fas fa-times not-valid"},ze=Object(n["i"])('<div class="container-fluid"><div class="row"><div class="col-1">Type</div><div class="col-2">Name</div><div class="col-1">Requests</div><div class="col-1">Fails</div><div class="col-1">Med</div><div class="col-1">Avg (ms)</div><div class="col-1">Min (ms)</div><div class="col-1">Max (ms)</div><div class="col-1">Avg size (bytes)</div><div class="col-1">RPS</div><div class="col-1">FPS</div></div></div>',1),Ae={key:0,class:"container-fluid results"},Ee={class:"col-1"},Je={class:"col-2"},Fe={class:"col-1"},Le={class:"col-1"},He={class:"col-1"},Be={class:"col-1"},Ve={class:"col-1"},We={class:"col-1"},qe={class:"col-1"},Ge={class:"col-1"},Ke={class:"col-1"},Ye={key:0,class:"card-footer"},Xe={class:"row"},Qe=Object(n["h"])("div",{class:"col-1"},null,-1),Ze={class:"col-2"},ts={class:"col-1"},es={class:"col-1"},ss={class:"col-1"},ns={class:"col-1"},os={class:"col-1"},is={class:"col-1"},as={class:"col-1"},rs={class:"col-1"},cs={class:"col-1"};function ls(t,e,s,o,i,a){var r=Object(n["A"])("router-link");return Object(n["v"])(),Object(n["g"])("div",null,[Object(n["h"])("div",{id:s.id},[Object(n["h"])("div",ne,[Object(n["h"])("div",oe,[Object(n["h"])("button",{type:"button",class:"btn btn-primary stop-test",onClick:e[0]||(e[0]=function(){return a.stop&&a.stop.apply(a,arguments)}),disabled:!i.running}," Stop ",8,ie),Object(n["h"])("button",{type:"button",class:"btn btn-primary restart-test",onClick:e[1]||(e[1]=function(){return a.restart&&a.restart.apply(a,arguments)}),disabled:i.running}," Restart ",8,ae),Object(n["h"])("button",{type:"button",class:"btn btn-primary download-test",onClick:e[2]||(e[2]=function(){return a.download&&a.download.apply(a,arguments)}),disabled:i.running}," Download ",8,re),Object(n["h"])("button",{type:"button",class:"btn btn-primary show-test-results",onClick:e[3]||(e[3]=function(){return a.showResults&&a.showResults.apply(a,arguments)}),disabled:!a.showResultsComp},Object(n["C"])(i.resultsText),9,ce),Object(n["h"])("button",{type:"button",class:"btn btn-danger delete-test",onClick:e[4]||(e[4]=function(){return a.deleteMe&&a.deleteMe.apply(a,arguments)})}," Delete ")]),i.showResultsBool?(Object(n["v"])(),Object(n["g"])("div",le,[Object(n["h"])("img",{class:"lin",src:i.linImageUrl},null,8,de),Object(n["h"])("img",{class:"reg",src:i.regImageUrl},null,8,ue)])):Object(n["f"])("",!0),s.showPath?(Object(n["v"])(),Object(n["g"])("div",he,[Object(n["k"])(r,{to:{name:"Project",params:{id:s.pid}}},{default:Object(n["H"])((function(){return[Object(n["j"])(Object(n["C"])(s.pid),1)]})),_:1},8,["to"]),fe,pe,be,Object(n["k"])(r,{to:{name:"Script",params:{pid:s.pid,id:s.sid}}},{default:Object(n["H"])((function(){return[Object(n["j"])(Object(n["C"])(s.sid),1)]})),_:1},8,["to"])])):Object(n["f"])("",!0),Object(n["h"])("div",{class:"card","data-mdb-toggle":"tooltip",title:i.tooltipText,onDblclick:e[5]||(e[5]=function(){return a.minimize&&a.minimize.apply(a,arguments)})},[Object(n["h"])("div",Oe,[Object(n["h"])("div",je,[Object(n["h"])("div",{class:Object(n["q"])(["col-3 test-id",{green:i.running,red:!s.valid}])},[Object(n["h"])("label",ge,Object(n["C"])(s.id),1)],2),Object(n["h"])("div",ve,[ke,Object(n["j"])(" "+Object(n["C"])(s.info.users),1)]),Object(n["h"])("div",ye,[Te,Object(n["j"])(" "+Object(n["C"])(s.info.spawn_rate),1)]),Object(n["h"])("div",Se,[Ie,Object(n["j"])(" "+Object(n["C"])(s.info.workers),1)]),Object(n["h"])("div",we,[_e,Object(n["j"])(" "+Object(n["C"])(s.info.host),1)]),Object(n["h"])("div",Ce,[Ue,Object(n["j"])(" "+Object(n["C"])(s.info.time),1)]),i.running?(Object(n["v"])(),Object(n["g"])("div",$e,[Ne,Object(n["h"])("label",Re," "+Object(n["C"])(i.elapsed),1)])):Object(n["f"])("",!0),Object(n["h"])("div",xe,[i.running?(Object(n["v"])(),Object(n["g"])("div",Pe)):Object(n["f"])("",!0),a.showCheck?(Object(n["v"])(),Object(n["g"])("i",Me)):Object(n["f"])("",!0),a.showX?(Object(n["v"])(),Object(n["g"])("i",De)):Object(n["f"])("",!0)])])]),Object(n["h"])("div",{class:"card-body",ref:"cardBody",style:Object(n["r"])(s.startMinimized?"display: none;":"display: block;")},[ze,a.renderData?(Object(n["v"])(),Object(n["g"])("div",Ae,[(Object(n["v"])(!0),Object(n["g"])(n["a"],null,Object(n["z"])(s.data.slice(0,-1),(function(t){return Object(n["v"])(),Object(n["g"])("div",{key:t,class:"row"},[Object(n["h"])("div",Ee,Object(n["C"])(t["Type"]),1),Object(n["h"])("div",Je,Object(n["C"])(t["Name"]),1),Object(n["h"])("div",Fe,Object(n["C"])(t["Request Count"]),1),Object(n["h"])("div",Le,Object(n["C"])(t["Failure Count"]),1),Object(n["h"])("div",He,Object(n["C"])(t["Median Response Time"]),1),Object(n["h"])("div",Be,Object(n["C"])(t["Average Response Time"].toString().slice(0,8)),1),Object(n["h"])("div",Ve,Object(n["C"])(t["Min Response Time"].toString().slice(0,8)),1),Object(n["h"])("div",We,Object(n["C"])(t["Max Response Time"].toString().slice(0,8)),1),Object(n["h"])("div",qe,Object(n["C"])(t["Average Content Size"].toString().slice(0,8)),1),Object(n["h"])("div",Ge,Object(n["C"])(t["Requests/s"].toString().slice(0,8)),1),Object(n["h"])("div",Ke,Object(n["C"])(t["Failures/s"].toString().slice(0,8)),1)])})),128))])):Object(n["f"])("",!0)],4),a.renderData?(Object(n["v"])(),Object(n["g"])("div",Ye,[Object(n["h"])("div",Xe,[Qe,Object(n["h"])("div",Ze,Object(n["C"])(s.data.at(-1)["Name"]),1),Object(n["h"])("div",ts,Object(n["C"])(s.data.at(-1)["Request Count"]),1),Object(n["h"])("div",es,Object(n["C"])(s.data.at(-1)["Failure Count"]),1),Object(n["h"])("div",ss,Object(n["C"])(s.data.at(-1)["Median Response Time"]),1),Object(n["h"])("div",ns,Object(n["C"])(s.data.at(-1)["Average Response Time"].toString().slice(0,8)),1),Object(n["h"])("div",os,Object(n["C"])(s.data.at(-1)["Min Response Time"].toString().slice(0,8)),1),Object(n["h"])("div",is,Object(n["C"])(s.data.at(-1)["Max Response Time"].toString().slice(0,8)),1),Object(n["h"])("div",as,Object(n["C"])(s.data.at(-1)["Average Content Size"].toString().slice(0,8)),1),Object(n["h"])("div",rs,Object(n["C"])(s.data.at(-1)["Requests/s"].toString().slice(0,8)),1),Object(n["h"])("div",cs,Object(n["C"])(s.data.at(-1)["Failures/s"].toString().slice(0,8)),1)])])):Object(n["f"])("",!0)],40,me)])],8,se)])}s("3ca3"),s("ddb0"),s("2b3d"),s("9861");var ds={name:"Test",props:["test","showPath","url","openfaasUrl","pid","sid","startMinimized","info","data","status","valid","id"],data:function(){return{running:!1,elapsed:"",elapsedIntv:null,enoughData:!0,showResultsBool:!1,linImageUrl:"",regImageUrl:"",dataLoaded:!1,resultsText:"Show results",loadingImages:!1,minimized:!1,tooltipText:"Double click to minimize"}},computed:{showCheck:function(){return!this.running&&this.valid},showX:function(){return!this.running&&!this.valid},renderData:function(){return null!=this.data&&this.data.length>0},showResultsComp:function(){return this.enoughData&&!this.running&&!this.loadingImages}},methods:{minimize:function(){this.minimized?this.tooltipText="Double click to minimize":this.tooltipText="Double click to maximize",$(this.$refs.cardBody).slideToggle(),this.minimized=!this.minimized},stop:function(){var t=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:8,project_name:this.pid,script_name:this.sid,id:this.id})}).then((function(t){return t.json()})).then((function(e){e.success?(t.running=!1,t.$emit("stop")):t.$root.showInfo("There was an error stopping the test","red")})).catch((function(){t.$root.showInfo("Could not connect to server","red")}))},restart:function(){this.$emit("restart",this.info,this.pid,this.sid)},deleteMe:function(){var t=this;this.$root.setUpConfirmation(this.id+": Are you sure you want to delete this test?","Delete",(function(){fetch(t.url,{method:"POST",body:JSON.stringify({command:9,project_name:t.pid,script_name:t.sid,id:t.id})}).then((function(t){return t.json()})).then((function(e){e.success?t.$emit("delete",t.id,t.pid,t.sid):t.$root.showInfo("There was an error deleting the test","red")})).catch((function(){t.$root.showInfo("Could not connect to server","red")}))}))},download:function(){fetch(this.url,{method:"POST",body:JSON.stringify({command:11,project_name:this.pid,script_name:this.sid,id:this.id})}).then((function(t){return t.blob()})).then((function(t){var e=URL.createObjectURL(t);window.location.href=e}))},showResults:function(){var t=this;this.dataLoaded?(this.showResultsBool?this.resultsText="Show results":this.resultsText="Hide results",this.showResultsBool=!this.showResultsBool):(this.loadingImages=!0,fetch(this.url,{method:"POST",body:JSON.stringify({command:12,project_name:this.pid,script_name:this.sid,id:this.id,type:1})}).then((function(t){return t.json()})).then((function(e){e.success&&(0==e.status_code?fetch(t.url,{method:"POST",body:JSON.stringify({command:12,project_name:t.pid,script_name:t.sid,id:t.id,type:2})}).then((function(t){return t.blob()})).then((function(e){var s=window.URL||window.webkitURL;t.linImageUrl=s.createObjectURL(e),fetch(t.url,{method:"POST",body:JSON.stringify({command:12,project_name:t.pid,script_name:t.sid,id:t.id,type:3})}).then((function(t){return t.blob()})).then((function(e){var s=window.URL||window.webkitURL;t.regImageUrl=s.createObjectURL(e),t.resultsText="Hide results",t.showResultsBool=!0,t.dataLoaded=!0}))})):2==e.status_code&&(t.$root.showInfo("Not enough data to analyse","red"),t.showResultsBool=!1,t.enoughData=!1)),t.loadingImages=!1})).catch((function(e){t.loadingImages=!1})))}},created:function(){this.minimized=this.startMinimized,this.minimized&&(this.tooltipText="Double click to maximize")},beforeUnmount:function(){this.elapsedIntv&&clearInterval(this.elapsedIntv)},updated:function(){this.valid&&0!==this.status||(this.running=!1)},mounted:function(){var t=this;this.running=1===JSON.parse(this.status),this.running&&(this.elapsed=parseInt(Date.now()/1e3-this.info.started_at),this.elapsedIntv=setInterval((function(){t.elapsed=parseInt(Date.now()/1e3-t.info.started_at)}),1e3))}};const us=bt()(ds,[["render",ls]]);var hs=us,fs=["id"],ps={class:"card-body"},bs={class:"row"},ms={class:"col-10 project_name","data-mdb-toggle":"tooltip",title:"Project name"},Os=Object(n["h"])("div",{class:"col-1"},[Object(n["h"])("div",{class:"spinner-border text-primary spinner","data-mdb-toggle":"tooltip",title:"Running"})],-1),js={class:"col-1","data-mdb-toggle":"tooltip",title:"Cancel"};function gs(t,e,s,o,i,a){return Object(n["v"])(),Object(n["g"])("div",{class:"card project-card",id:s.id},[Object(n["h"])("div",ps,[Object(n["h"])("div",bs,[Object(n["h"])("div",ms," Installing project: "+Object(n["C"])(s.id),1),Os,Object(n["h"])("div",js,[Object(n["h"])("i",{class:"fas fa-times stop-install-project",onClick:e[0]||(e[0]=function(){return a.stop&&a.stop.apply(a,arguments)})})])])])],8,fs)}var vs={name:"InstallationProcess",props:["id","url","openfaasUrl","socket"],data:function(){return{socketIntv:null}},methods:{stop:function(){var t=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:15,project_name:this.id})}).then((function(t){return t.json()})).then((function(e){e.success?(t.$root.showInfo(t.id+": installation canceled successfully","green"),t.$emit("delete")):t.$root.showInfo("There was an error canceling the installation","red")})).catch((function(){t.$root.showInfo("Could not connect to server","red")}))}},beforeUnmount:function(){this.socketIntv&&clearInterval(this.socketIntv)},mounted:function(){var t=this;this.socketIntv=setInterval((function(){t.socket.emit("task_stats",{project_name:t.id,openfaasurl:t.openfaasUrl})}),1e3),this.socket.on(this.id,(function(e){var s=JSON.parse(e.data);s.success?3===s.status_code?console.log("thread is locking"):2===s.status_code?console.log("installing project"):1===s.status_code?(console.log("installing failed"),clearInterval(t.socketIntv),t.$root.showInfo("Installation failed","red",s.error),t.$emit("delete")):(console.log("Task is finished"),clearInterval(t.socketIntv),t.$emit("delete"),t.$root.showInfo("Installation successs","green")):(console.log("Something went wrong"),t.$root.showInfo("Something went wrong","red"),clearInterval(t.socketIntv))}))}};const ks=bt()(vs,[["render",gs]]);var ys=ks,Ts={name:"Control",components:{Test:hs,InstallationProcess:ys},props:["url","openfaasUrl","socket","minimizeTests","update"],data:function(){return{tests:{},projects:[]}},methods:{register:function(){var t=this;this.socket.off(this.openfaasUrl+"_control"),this.socket.emit("register_control",{openfaasurl:this.openfaasUrl}),this.socket.on(this.openfaasUrl+"_control",(function(e){if(IsJsonString(e)&&(e=JSON.parse(e),e.success))if(Object.keys(e.tests).length>=Object.keys(t.tests).length)for(var s in e.tests){var n=e.tests[s].id;n in t.tests?(t.tests[n].data=e.tests[s].data,t.tests[n].valid=e.tests[s].valid):t.tests[n]=e.tests[s]}else for(var s in t.tests)if(s in e.tests){var o=e.tests[s].id;o in t.tests?(t.tests[o].data=e.tests[s].data,t.tests[o].valid=e.tests[s].valid):t.tests[o]=e.tests[s]}else t.tests[s].status=0}))},init:function(){var t=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:13})}).then((function(t){return t.json()})).then((function(e){e.success&&(t.tests=e.tests)})).catch((function(){t.$emit("info","Could not connect to server","red")})),fetch(this.url,{method:"POST",body:JSON.stringify({command:1})}).then((function(t){return t.json()})).then((function(e){e.success&&(t.projects=e.projects)})).catch((function(){t.$emit("info","Could not connect to server","red")})),this.register(),this.socket.on(this.openfaasUrl+"_control_test_delete",(function(e){for(var s=0;s<e.length;s++)e[s]in t.tests&&delete t.tests[e[s]]})),this.socket.on(this.openfaasUrl+"_control_test_stop",(function(e){e in t.tests&&(t.tests[e].status=0)}))},killRunningTasks:function(){var t=this;this.$root.setUpConfirmation("Kill all running tasks? Istallation tasks will also be killed","Kill",(function(){fetch(t.url,{method:"POST",body:JSON.stringify({command:911})}).then((function(t){return t.json()})).then((function(e){if(e.success)for(var s in t.$emit("info","Success","green"),t.tests)t.tests[s].status=0;else t.$emit("info","There was an error killing running tasks","red")})).catch((function(){t.$emit("info","Could not connect to server","red")}))}))},deleteAllProjects:function(){var t=this;this.$root.setUpConfirmation("Delete all projects?","Delete",(function(){fetch(t.url,{method:"POST",body:JSON.stringify({command:912})}).then((function(t){return t.json()})).then((function(e){e.success?(t.$emit("info","Success","green"),t.tests={}):t.$emit("info","There was an error deleting projects","red")})).catch((function(){t.$emit("info","Could not connect to server","red")}))}))},restart:function(t,e,s){this.start(t.users,t.spawn_rate,t.workers,t.host,t.time,e,s)},start:function(t,e,s,n,o,i,a){var r=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:5,project_name:i,script_name:a,users:parseInt(t),spawn_rate:parseInt(e),workers:parseInt(s),host:n,time:parseInt(o)})}).then((function(t){return t.json()})).then((function(c){if(c.success){var l=c.id,d=c.started_at,u=JSON.stringify({users:t,spawn_rate:e,host:n,workers:s,time:o,started_at:d}),h=1,f=!0,p={id:l,info:u,status:h,valid:f,project_name:i,script_name:a,data:JSON.stringify([])};r.tests[l]=p,r.socket.emit("test_start",{openfaasurl:r.openfaasUrl,project_name:i,script_name:a,test:p})}})).catch((function(){r.$emit("info","Could not connect to server","red")}))},deleteTest:function(t,e,s){delete this.tests[t],this.socket.emit("test_delete",{openfaasurl:this.openfaasUrl,project_name:e,script_name:s,ids:[t]})},deleteProject:function(t){this.projects=this.projects.filter((function(e){return e!==t}))}},computed:{reversedTests:function(){return Object.entries(this.tests).reverse()}},beforeUnmount:function(){this.socket.emit("disconnect_control"),this.socket.off(this.openfaasUrl+"_control"),this.socket.off(this.openfaasUrl+"_control_test_delete"),this.socket.off(this.openfaasUrl+"_control_test_stop")},mounted:function(){this.init()},updated:function(){this.update&&(this.init(),this.$root.updated())}};const Ss=bt()(Ts,[["render",ee]]);var Is=Ss,ws={class:"card license"},_s=Object(n["h"])("div",{class:"card-body"},[Object(n["h"])("h5",{class:"card-title"},"MIT License"),Object(n["h"])("p",{class:"card-text"},[Object(n["j"])(" Copyright (c) 2021 Jad K. Haddad"),Object(n["h"])("br"),Object(n["h"])("br"),Object(n["j"])(' Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:'),Object(n["h"])("br"),Object(n["h"])("br"),Object(n["j"])(" The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software."),Object(n["h"])("br"),Object(n["h"])("br"),Object(n["j"])(' THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. ')])],-1),Cs=[_s];function Us(t,e,s,o,i,a){return Object(n["v"])(),Object(n["g"])("div",ws,Cs)}var $s={name:"License"};const Ns=bt()($s,[["render",Us]]);var Rs=Ns,xs={id:"message"},Ps={key:0,id:"initializing"},Ms=Object(n["h"])("h4",null,"initializing..",-1),Ds=Object(n["h"])("div",{class:"btn-container"},[Object(n["h"])("div",{class:"spinner-border text-primary spinner"})],-1),zs=[Ms,Ds];function As(t,e,s,o,i,a){return Object(n["v"])(),Object(n["g"])("div",null,[Object(n["h"])("h1",xs,Object(n["C"])(i.message),1),i.loading?(Object(n["v"])(),Object(n["g"])("div",Ps,zs)):Object(n["f"])("",!0)])}var Es={name:"Openfaas",props:["socket"],data:function(){return{message:"",loading:!1}},mounted:function(){var t=this;fetch("/openfaas",{method:"POST"}).then((function(t){return t.json()})).then((function(e){t.message=e.message;var s=JSON.parse(e.check);s&&(t.loading=!0,t.socket.emit("openfaas"),t.socket.on("openfaas",(function(e){console.log(e);var s=JSON.parse(e.data);1==s&&(t.message="function installed",t.loading=!1)})))})).catch((function(){}))},beforeUnmount:function(){this.socket.off("openfaas")}};const Js=bt()(Es,[["render",As]]);var Fs=Js,Ls={class:"list-group"},Hs=["id","onClick"],Bs={class:"test-label"};function Vs(t,e,s,o,i,a){var r=Object(n["A"])("router-link");return Object(n["v"])(),Object(n["g"])("div",null,[Object(n["h"])("h3",null,Object(n["C"])(i.id),1),Object(n["h"])("div",Ls,[(Object(n["v"])(!0),Object(n["g"])(n["a"],null,Object(n["z"])(i.scripts,(function(t){return Object(n["v"])(),Object(n["g"])("a",{key:t,id:t,onClick:function(e){return a.navigateToScript(t)},class:"list-group-item list-group-item-action"},[Object(n["k"])(r,{to:{name:"Script",params:{pid:i.id,id:t}}},{default:Object(n["H"])((function(){return[Object(n["h"])("label",Bs,Object(n["C"])(t),1)]})),_:2},1032,["to"])],8,Hs)})),128))])])}var Ws={name:"Project",props:["url","openfaasUrl","socket","update"],data:function(){return{id:this.$route.params.id,scripts:[]}},methods:{init:function(){var t=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:4,project_name:this.id})}).then((function(t){return t.json()})).then((function(e){e.success&&(t.scripts=e.locust_scripts)})).catch((function(){t.$emit("info","Could not connect to server","red")}))},navigateToScript:function(t){this.$router.push({name:"Script",params:{pid:this.id,id:t}})}},mounted:function(){this.init()},updated:function(){this.update&&(this.init(),this.$root.updated())}};const qs=bt()(Ws,[["render",Vs]]);var Gs=qs,Ks={class:"btn-container"},Ys=Object(n["h"])("button",{type:"button",class:"btn btn-primary","data-mdb-toggle":"modal","data-mdb-target":"#Modal"}," Start ",-1),Xs={class:"modal fade",id:"Modal",tabindex:"-1","aria-labelledby":"ModalLabel","aria-hidden":"true"},Qs={class:"modal-dialog"},Zs={class:"modal-content"},tn=Object(n["h"])("div",{class:"modal-header"},[Object(n["h"])("h5",{class:"modal-title",id:"ModalLabel"},"Start")],-1),en={class:"modal-body"},sn={class:"form-outline mb-4"},nn=Object(n["h"])("label",{class:"form-label",for:"users-input"},"Users",-1),on={class:"form-outline mb-4"},an=Object(n["h"])("label",{class:"form-label",for:"spawn-rate-input"},"Spawn rate",-1),rn={class:"form-outline mb-4"},cn=Object(n["h"])("label",{class:"form-label",for:"workers-input"},"Workers",-1),ln=Object(n["h"])("div",{class:"form-text",style:{"padding-bottom":"10px"}}," This will overwrite all hosts in your file ",-1),dn={class:"form-outline mb-4"},un=Object(n["h"])("label",{class:"form-label",for:"host-input"},"Host",-1),hn=Object(n["h"])("div",{class:"form-text",style:{"padding-bottom":"10px"}}," If time is not set, the test will not stop automatically ",-1),fn={class:"form-outline mb-4"},pn=Object(n["h"])("label",{class:"form-label",for:"time-input"},"Time in seconds",-1),bn={type:"button",class:"btn btn-primary hidden","data-mdb-dismiss":"modal",id:"dismiss-btn",ref:"dismiss"};function mn(t,e,s,o,i,a){var r=Object(n["A"])("Test");return Object(n["v"])(),Object(n["g"])("div",null,[Object(n["h"])("h3",null,Object(n["C"])(i.id),1),Object(n["h"])("div",Ks,[Ys,Object(n["h"])("button",{type:"button",class:"btn btn-danger",id:"delete-script-tests",onClick:e[0]||(e[0]=function(){return a.deleteAll&&a.deleteAll.apply(a,arguments)})}," Delete all ")]),(Object(n["v"])(!0),Object(n["g"])(n["a"],null,Object(n["z"])(a.reversedTests,(function(t){return Object(n["v"])(),Object(n["e"])(r,{key:t[0],id:t[0],info:JSON.parse(t[1].info),data:JSON.parse(t[1].data),status:t[1].status,valid:t[1].valid,showPath:!1,url:s.url,openfaasUrl:s.openfaasUrl,pid:i.pid,sid:i.id,startMinimized:s.minimizeTests,onRestart:a.restart,onDelete:a.deleteTest,onStop:function(e){return a.stop(t[0])}},null,8,["id","info","data","status","valid","url","openfaasUrl","pid","sid","startMinimized","onRestart","onDelete","onStop"])})),128)),Object(n["h"])("div",Xs,[Object(n["h"])("div",Qs,[Object(n["h"])("div",Zs,[tn,Object(n["h"])("div",en,[Object(n["h"])("form",null,[Object(n["h"])("div",sn,[Object(n["I"])(Object(n["h"])("input",{type:"text",id:"users-input",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.users=t})},null,512),[[n["F"],i.users]]),nn]),Object(n["h"])("div",on,[Object(n["I"])(Object(n["h"])("input",{type:"text",id:"spawn-rate-input",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=function(t){return i.spawnRate=t})},null,512),[[n["F"],i.spawnRate]]),an]),Object(n["h"])("div",rn,[Object(n["I"])(Object(n["h"])("input",{type:"text",id:"workers-input",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=function(t){return i.workers=t})},null,512),[[n["F"],i.workers]]),cn]),ln,Object(n["h"])("div",dn,[Object(n["I"])(Object(n["h"])("input",{type:"text",id:"host-input",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=function(t){return i.host=t})},null,512),[[n["F"],i.host]]),un]),hn,Object(n["h"])("div",fn,[Object(n["I"])(Object(n["h"])("input",{type:"text",id:"time-input",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=function(t){return i.time=t})},null,512),[[n["F"],i.time]]),pn]),Object(n["h"])("button",{type:"button",class:"btn btn-primary btn-block",id:"start-btn",onClick:e[6]||(e[6]=function(){return a.startFromModal&&a.startFromModal.apply(a,arguments)})}," Start ")]),Object(n["h"])("button",bn,null,512)])])])])])}var On={name:"Script",components:{Test:hs},props:["url","openfaasUrl","socket","minimizeTests","update"],data:function(){return{id:this.$route.params.id,pid:this.$route.params.pid,tests:{},users:"",spawnRate:"",workers:"",host:"",time:""}},methods:{register:function(t){var e=this;this.socket.off(this.openfaasUrl+"_"+this.pid+"_"+this.id),this.socket.emit("register_script",{openfaasurl:this.openfaasUrl,project_name:this.pid,script_name:this.id,test_ids:t}),this.socket.on(this.openfaasUrl+"_"+this.pid+"_"+this.id,(function(t){if(IsJsonString(t)&&(t=JSON.parse(t),t.success))for(var s=0;s<t.tests.length;s++){var n=t.tests[s].id;if(n in e.tests){var o=t.tests[s].status;0===o?(e.disconnectTest(n),e.tests[n].status=0):1===o?e.tests[n].data=t.tests[s].data:3===o&&(e.tests[n].valid=!1,e.disconnectTest(n))}}}))},registerTest:function(t){this.socket.emit("register_test",{openfaasurl:this.openfaasUrl,project_name:this.pid,script_name:this.id,test_id:t})},disconnectTest:function(t){this.socket.emit("disconnect_test",{openfaasurl:this.openfaasUrl,project_name:this.pid,script_name:this.id,test_id:t})},init:function(){var t=this;this.host=localStorage.getItem("last_host"),document.querySelectorAll(".form-outline").forEach((function(t){new mdb.Input(t).init()})),fetch(this.url,{method:"POST",body:JSON.stringify({command:7,project_name:this.pid,script_name:this.id})}).then((function(t){return t.json()})).then((function(e){if(e.success){var s=[];for(var n in e.tests)1===e.tests[n].status&&s.push(e.tests[n].id);t.register(s),t.tests=e.tests}})).catch((function(e){t.$emit("info","Could not connect to server","red")})),this.socket.on(this.openfaasUrl+"_"+this.pid+"_"+this.id+"_test_start",(function(e){e.id in t.tests||(t.tests[e.id]=e,t.registerTest(e.id))})),this.socket.on(this.openfaasUrl+"_"+this.pid+"_"+this.id+"_test_delete",(function(e){for(var s=0;s<e.length;s++)e[s]in t.tests&&(delete t.tests[e[s]],t.disconnectTest(e[s]))}))},deleteAll:function(){var t=this;this.$root.setUpConfirmation(this.id+": Are you sure you want to delete all tests?","Delete",(function(){fetch(t.url,{method:"POST",body:JSON.stringify({command:16,project_name:t.pid,script_name:t.id})}).then((function(t){return t.json()})).then((function(e){e.success?(t.$emit("info","Success","green"),t.socket.emit("disconnect_script",{project_name:t.pid,script_name:t.id}),t.socket.emit("test_delete",{openfaasurl:t.openfaasUrl,project_name:t.pid,script_name:t.id,ids:Object.keys(t.tests)}),t.tests={}):t.$emit("info","There was an error deleting tests","red")})).catch((function(){this.$emit("info","Could not connect to server","red")}))}))},start:function(t,e,s,n,o){var i=this;fetch(this.url,{method:"POST",body:JSON.stringify({command:5,project_name:this.pid,script_name:this.id,users:parseInt(t),spawn_rate:parseInt(e),workers:parseInt(s),host:n,time:parseInt(o)})}).then((function(t){return t.json()})).then((function(a){if(a.success){var r=a.id,c=a.started_at,l=JSON.stringify({users:t,spawn_rate:e,host:n,workers:s,time:o,started_at:c}),d=1,u=!0,h={id:r,info:l,status:d,valid:u,data:JSON.stringify([])};i.tests[r]=h,i.registerTest(r),i.socket.emit("test_start",{openfaasurl:i.openfaasUrl,project_name:i.pid,script_name:i.id,test:h})}else i.$emit("info",a.message,"red")})).catch((function(){i.$emit("info","Could not connect to server","red")}))},startFromModal:function(){return null!=this.host&&(this.host=this.host.replace("http://","").replace("https://",""),""!=this.host&&(this.host="http://"+this.host)),""===this.users?(this.$emit("info","Users cant be empty","red"),!1):isInteger(this.users)?""===this.spawnRate?(this.$emit("info","Spawn rate cant be empty","red"),!1):isInteger(this.spawnRate)?""===this.workers||isInteger(this.workers)?""==this.time||isInteger(this.time)?(this.$refs.dismiss.click(),""!=this.host&&null!=this.host&&localStorage.setItem("last_host",this.host),void this.start(this.users,this.spawnRate,this.workers,this.host,this.time)):(this.$emit("info","Time must be an integer","red"),!1):(this.$emit("info","workers must be an integer","red"),!1):(this.$emit("info","Spawn rate must be an integer","red"),!1):(this.$emit("info","Users must be an integer","red"),!1)},restart:function(t){this.start(t.users,t.spawn_rate,t.workers,t.host,t.time)},deleteTest:function(t){delete this.tests[t],this.socket.emit("test_delete",{openfaasurl:this.openfaasUrl,project_name:this.pid,script_name:this.id,ids:[t]}),this.disconnectTest(t)},stop:function(t){this.socket.emit("test_stop",{openfaasurl:this.openfaasUrl,id:t})}},computed:{reversedTests:function(){return Object.entries(this.tests).reverse()}},beforeUnmount:function(){this.socket.emit("disconnect_script",{project_name:this.pid,script_name:this.id}),this.socket.off(this.openfaasUrl+"_"+this.pid+"_"+this.id),this.socket.off(this.openfaasUrl+"_"+this.pid+"_"+this.id+"_test_start"),this.socket.off(this.openfaasUrl+"_"+this.pid+"_"+this.id+"_test_delete")},mounted:function(){this.init()},updated:function(){this.update&&(this.init(),this.$root.updated())}};const jn=bt()(On,[["render",mn]]);var gn=jn,vn={class:"egg"},kn=Object(n["h"])("i",{class:"fas fa-egg fa-10x",id:"egg"},null,-1),yn=[kn];function Tn(t,e,s,o,i,a){return Object(n["v"])(),Object(n["g"])("div",vn,yn)}var Sn={mounted:function(){var t=0;$("#egg").on("mousedown",(function(){t>50||(t>42?$(this).toggleClass("fas far").toggleClass("fa-egg fa-dizzy"):t>39?$(this).toggleClass("fas far").toggleClass("fa-egg fa-angry"):t>36?$(this).toggleClass("fas far").toggleClass("fa-egg fa-frown-open"):t>33?$(this).toggleClass("fas far").toggleClass("fa-egg fa-frown"):t>29?$(this).toggleClass("fas far").toggleClass("fa-egg fa-flushed"):t>26?$(this).toggleClass("fas far").toggleClass("fa-egg fa-meh-blank"):t>23?$(this).toggleClass("fas far").toggleClass("fa-egg fa-meh"):t>20?$(this).toggleClass("fas far").toggleClass("fa-egg fa-grin-beam-sweat"):t>13?$(this).toggleClass("fas far").toggleClass("fa-egg fa-grin-beam"):t>10?$(this).toggleClass("fas far").toggleClass("fa-egg fa-grin"):t>5?$(this).toggleClass("fas far").toggleClass("fa-egg fa-smile"):$(this).toggleClass("fas far").toggleClass("fa-egg fa-smile-wink"),t+=1)})).on("mouseup",(function(){t>=50||($(this).removeClass("fa-smile-wink").removeClass("fa-smile").removeClass("fa-grin"),$(this).removeClass("fa-grin-beam").removeClass("fa-grin-beam-sweat").removeClass("fa-meh"),$(this).removeClass("fa-meh-blank").removeClass("fa-flushed").removeClass("fa-frown"),$(this).removeClass("fa-frown-open").removeClass("fa-angry").removeClass("fa-dizzy"),$(this).toggleClass("far fas"),$(this).addClass("fa-egg"))}))}};const In=bt()(Sn,[["render",Tn]]);var wn=In;function _n(t,e,s,o,i,a){return Object(n["v"])(),Object(n["g"])("h1",null,"404 | Not Found")}var Cn={};const Un=bt()(Cn,[["render",_n]]);var $n=Un,Nn=[{path:"/",name:"Home",component:Zt},{path:"/control",name:"Control",component:Is},{path:"/openfaas",name:"Openfaas",component:Fs},{path:"/license",name:"License",component:Rs},{path:"/project/:id",name:"Project",component:Gs,props:!0},{path:"/project/:pid/:id",name:"Script",component:gn,props:!0},{path:"/egg",name:"Egg",component:wn},{path:"/:catchAll(.*)",name:"NotFound",component:$n}],Rn=Object(Ct["a"])({history:Object(Ct["b"])("/"),routes:Nn}),xn=Rn;Object(n["d"])(_t).use(xn).mount("#app")}});
//# sourceMappingURL=app.bb474e8b.js.map